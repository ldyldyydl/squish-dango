(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48013,(e,t,n)=>{e.e,t.exports=function(){var t=[function(t,n){var o,i={};t.exports=i,i._baseDelta=1e3/60,i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i._warnedOnce={},i._decomp=null,i.extend=function(e,t){var n,o;"boolean"==typeof t?(n=2,o=t):(n=1,o=!0);for(var r=n;r<arguments.length;r++){var a=arguments[r];if(a)for(var s in a)o&&a[s]&&a[s].constructor===Object?e[s]&&e[s].constructor!==Object?e[s]=a[s]:(e[s]=e[s]||{},i.extend(e[s],o,a[s])):e[s]=a[s]}return e},i.clone=function(e,t){return i.extend({},t,e)},i.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},i.values=function(e){var t=[];if(Object.keys){for(var n=Object.keys(e),o=0;o<n.length;o++)t.push(e[n[o]]);return t}for(var i in e)t.push(e[i]);return t},i.get=function(e,t,n,o){t=t.split(".").slice(n,o);for(var i=0;i<t.length;i+=1)e=e[t[i]];return e},i.set=function(e,t,n,o,r){var a=t.split(".").slice(o,r);return i.get(e,t,0,-1)[a[a.length-1]]=n,n},i.shuffle=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(i.random()*(t+1)),o=e[t];e[t]=e[n],e[n]=o}return e},i.choose=function(e){return e[Math.floor(i.random()*e.length)]},i.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},i.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},i.isFunction=function(e){return"function"==typeof e},i.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},i.isString=function(e){return"[object String]"===toString.call(e)},i.clamp=function(e,t,n){return e<t?t:e>n?n:e},i.sign=function(e){return e<0?-1:1},i.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();else if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-i._nowStartTime},i.random=function(e,t){return t=void 0!==t?t:1,(e=void 0!==e?e:0)+o()*(t-e)},o=function(){return i._seed=(9301*i._seed+49297)%233280,i._seed/233280},i.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warnOnce=function(){var e=Array.prototype.slice.call(arguments).join(" ");i._warnedOnce[e]||(i.warn(e),i._warnedOnce[e]=!0)},i.deprecated=function(e,t,n){e[t]=i.chain(function(){i.warnOnce("🔅 deprecated 🔅",n)},e[t])},i.nextId=function(){return i._nextId++},i.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return -1},i.map=function(e,t){if(e.map)return e.map(t);for(var n=[],o=0;o<e.length;o+=1)n.push(t(e[o]));return n},i.topologicalSort=function(e){var t=[],n=[],o=[];for(var r in e)n[r]||o[r]||i._topologicalSort(r,n,o,e,t);return t},i._topologicalSort=function(e,t,n,o,r){var a=o[e]||[];n[e]=!0;for(var s=0;s<a.length;s+=1){var l=a[s];!n[l]&&(t[l]||i._topologicalSort(l,t,n,o,r))}n[e]=!1,t[e]=!0,r.push(e)},i.chain=function(){for(var e=[],t=0;t<arguments.length;t+=1){var n=arguments[t];n._chained?e.push.apply(e,n._chained):e.push(n)}var o=function(){for(var t,n=Array(arguments.length),o=0,i=arguments.length;o<i;o++)n[o]=arguments[o];for(o=0;o<e.length;o+=1){var r=e[o].apply(t,n);void 0!==r&&(t=r)}return t};return o._chained=e,o},i.chainPathBefore=function(e,t,n){return i.set(e,t,i.chain(n,i.get(e,t)))},i.chainPathAfter=function(e,t,n){return i.set(e,t,i.chain(i.get(e,t),n))},i.setDecomp=function(e){i._decomp=e},i.getDecomp=function(){var t=i._decomp;try{t||"undefined"==typeof window||(t=window.decomp),t||(t=e.g.decomp)}catch(e){t=null}return t}},function(e,t){var n={};e.exports=n,n.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&n.update(t,e),t},n.update=function(e,t,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var o=0;o<t.length;o++){var i=t[o];i.x>e.max.x&&(e.max.x=i.x),i.x<e.min.x&&(e.min.x=i.x),i.y>e.max.y&&(e.max.y=i.y),i.y<e.min.y&&(e.min.y=i.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},n.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},n.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},n.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},n.shift=function(e,t){var n=e.max.x-e.min.x,o=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+n,e.min.y=t.y,e.max.y=t.y+o}},function(e,t){var n={};e.exports=n,n.create=function(e,t){return{x:e||0,y:t||0}},n.clone=function(e){return{x:e.x,y:e.y}},n.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},n.rotate=function(e,t,n){var o=Math.cos(t),i=Math.sin(t);n||(n={});var r=e.x*o-e.y*i;return n.y=e.x*i+e.y*o,n.x=r,n},n.rotateAbout=function(e,t,n,o){var i=Math.cos(t),r=Math.sin(t);o||(o={});var a=n.x+((e.x-n.x)*i-(e.y-n.y)*r);return o.y=n.y+((e.x-n.x)*r+(e.y-n.y)*i),o.x=a,o},n.normalise=function(e){var t=n.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.cross=function(e,t){return e.x*t.y-e.y*t.x},n.cross3=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},n.add=function(e,t,n){return n||(n={}),n.x=e.x+t.x,n.y=e.y+t.y,n},n.sub=function(e,t,n){return n||(n={}),n.x=e.x-t.x,n.y=e.y-t.y,n},n.mult=function(e,t){return{x:e.x*t,y:e.y*t}},n.div=function(e,t){return{x:e.x/t,y:e.y/t}},n.perp=function(e,t){return{x:-((t=!0===t?-1:1)*e.y),y:t*e.x}},n.neg=function(e){return{x:-e.x,y:-e.y}},n.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]},function(e,t,n){var o={};e.exports=o;var i=n(2),r=n(0);o.create=function(e,t){for(var n=[],o=0;o<e.length;o++){var i=e[o],r={x:i.x,y:i.y,index:o,body:t,isInternal:!1};n.push(r)}return n},o.fromPath=function(e,t){var n=[];return e.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,function(e,t,o){n.push({x:parseFloat(t),y:parseFloat(o)})}),o.create(n,t)},o.centre=function(e){for(var t,n,r,a=o.area(e,!0),s={x:0,y:0},l=0;l<e.length;l++)r=(l+1)%e.length,t=i.cross(e[l],e[r]),n=i.mult(i.add(e[l],e[r]),t),s=i.add(s,n);return i.div(s,6*a)},o.mean=function(e){for(var t={x:0,y:0},n=0;n<e.length;n++)t.x+=e[n].x,t.y+=e[n].y;return i.div(t,e.length)},o.area=function(e,t){for(var n=0,o=e.length-1,i=0;i<e.length;i++)n+=(e[o].x-e[i].x)*(e[o].y+e[i].y),o=i;return t?n/2:Math.abs(n)/2},o.inertia=function(e,t){for(var n,o,r=0,a=0,s=0;s<e.length;s++)o=(s+1)%e.length,r+=(n=Math.abs(i.cross(e[o],e[s])))*(i.dot(e[o],e[o])+i.dot(e[o],e[s])+i.dot(e[s],e[s])),a+=n;return t/6*(r/a)},o.translate=function(e,t,n){n=void 0!==n?n:1;var o,i=e.length,r=t.x*n,a=t.y*n;for(o=0;o<i;o++)e[o].x+=r,e[o].y+=a;return e},o.rotate=function(e,t,n){if(0!==t){var o,i,r,a,s=Math.cos(t),l=Math.sin(t),u=n.x,c=n.y,d=e.length;for(a=0;a<d;a++)i=(o=e[a]).x-u,r=o.y-c,o.x=u+(i*s-r*l),o.y=c+(i*l+r*s);return e}},o.contains=function(e,t){for(var n,o=t.x,i=t.y,r=e.length,a=e[r-1],s=0;s<r;s++){if(n=e[s],(o-a.x)*(n.y-a.y)+(i-a.y)*(a.x-n.x)>0)return!1;a=n}return!0},o.scale=function(e,t,n,r){if(1===t&&1===n)return e;r=r||o.centre(e);for(var a,s,l=0;l<e.length;l++)a=e[l],s=i.sub(a,r),e[l].x=r.x+s.x*t,e[l].y=r.y+s.y*n;return e},o.chamfer=function(e,t,n,o,a){t="number"==typeof t?[t]:t||[8],n=void 0!==n?n:-1,o=o||2,a=a||14;for(var s=[],l=0;l<e.length;l++){var u=e[l-1>=0?l-1:e.length-1],c=e[l],d=e[(l+1)%e.length],p=t[l<t.length?l:t.length-1];if(0===p){s.push(c);continue}var f=i.normalise({x:c.y-u.y,y:u.x-c.x}),h=i.normalise({x:d.y-c.y,y:c.x-d.x}),m=Math.sqrt(2*Math.pow(p,2)),v=i.mult(r.clone(f),p),y=i.normalise(i.mult(i.add(f,h),.5)),g=i.sub(c,i.mult(y,m)),_=n;-1===n&&(_=1.75*Math.pow(p,.32)),(_=r.clamp(_,o,a))%2==1&&(_+=1);for(var x=Math.acos(i.dot(f,h))/_,b=0;b<_;b++)s.push(i.add(i.rotate(v,x*b),g))}return s},o.clockwiseSort=function(e){var t=o.mean(e);return e.sort(function(e,n){return i.angle(t,e)-i.angle(t,n)}),e},o.isConvex=function(e){var t,n,o,i,r=0,a=e.length;if(a<3)return null;for(t=0;t<a;t++)if(n=(t+1)%a,o=(t+2)%a,(i=(e[n].x-e[t].x)*(e[o].y-e[n].y)-(e[n].y-e[t].y)*(e[o].x-e[n].x))<0?r|=1:i>0&&(r|=2),3===r)return!1;return 0!==r||null},o.hull=function(e){var t,n,o=[],r=[];for((e=e.slice(0)).sort(function(e,t){var n=e.x-t.x;return 0!==n?n:e.y-t.y}),n=0;n<e.length;n+=1){for(t=e[n];r.length>=2&&0>=i.cross3(r[r.length-2],r[r.length-1],t);)r.pop();r.push(t)}for(n=e.length-1;n>=0;n-=1){for(t=e[n];o.length>=2&&0>=i.cross3(o[o.length-2],o[o.length-1],t);)o.pop();o.push(t)}return o.pop(),r.pop(),o.concat(r)}},function(e,t,n){var o,i={};e.exports=i;var r=n(3),a=n(2),s=n(7),l=n(0),u=n(1),c=n(11);i._timeCorrection=!0,i._inertiaScale=4,i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,i._baseDelta=1e3/60,i.create=function(e){var t={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:r.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:0xffffffff,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:1e3/60,_original:null},n=l.extend(t,e);return o(n,e),n},i.nextGroup=function(e){return e?i._nextNonCollidingGroupId--:i._nextCollidingGroupId++},i.nextCategory=function(){return i._nextCategory=i._nextCategory<<1,i._nextCategory},o=function(e,t){t=t||{},i.set(e,{bounds:e.bounds||u.create(e.vertices),positionPrev:e.positionPrev||a.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),r.rotate(e.vertices,e.angle,e.position),c.rotate(e.axes,e.angle),u.update(e.bounds,e.vertices,e.velocity),i.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var n=e.isStatic?"#14151f":l.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),o=e.isStatic?"#555":"#ccc",s=e.isStatic&&null===e.render.fillStyle?1:0;e.render.fillStyle=e.render.fillStyle||n,e.render.strokeStyle=e.render.strokeStyle||o,e.render.lineWidth=e.render.lineWidth||s,e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)},i.set=function(e,t,n){var o;for(o in"string"==typeof t&&(o=t,(t={})[o]=n),t)if(Object.prototype.hasOwnProperty.call(t,o))switch(n=t[o],o){case"isStatic":i.setStatic(e,n);break;case"isSleeping":s.set(e,n);break;case"mass":i.setMass(e,n);break;case"density":i.setDensity(e,n);break;case"inertia":i.setInertia(e,n);break;case"vertices":i.setVertices(e,n);break;case"position":i.setPosition(e,n);break;case"angle":i.setAngle(e,n);break;case"velocity":i.setVelocity(e,n);break;case"angularVelocity":i.setAngularVelocity(e,n);break;case"speed":i.setSpeed(e,n);break;case"angularSpeed":i.setAngularSpeed(e,n);break;case"parts":i.setParts(e,n);break;case"centre":i.setCentre(e,n);break;default:e[o]=n}},i.setStatic=function(e,t){for(var n=0;n<e.parts.length;n++){var o=e.parts[n];t?(o.isStatic||(o._original={restitution:o.restitution,friction:o.friction,mass:o.mass,inertia:o.inertia,density:o.density,inverseMass:o.inverseMass,inverseInertia:o.inverseInertia}),o.restitution=0,o.friction=1,o.mass=o.inertia=o.density=1/0,o.inverseMass=o.inverseInertia=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.angularVelocity=0,o.speed=0,o.angularSpeed=0,o.motion=0):o._original&&(o.restitution=o._original.restitution,o.friction=o._original.friction,o.mass=o._original.mass,o.inertia=o._original.inertia,o.density=o._original.density,o.inverseMass=o._original.inverseMass,o.inverseInertia=o._original.inverseInertia,o._original=null),o.isStatic=t}},i.setMass=function(e,t){var n=e.inertia/(e.mass/6);e.inertia=t/6*n,e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},i.setDensity=function(e,t){i.setMass(e,t*e.area),e.density=t},i.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},i.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=r.create(t,e),e.axes=c.fromVertices(e.vertices),e.area=r.area(e.vertices),i.setMass(e,e.density*e.area);var n=r.centre(e.vertices);r.translate(e.vertices,n,-1),i.setInertia(e,i._inertiaScale*r.inertia(e.vertices,e.mass)),r.translate(e.vertices,e.position),u.update(e.bounds,e.vertices,e.velocity)},i.setParts=function(e,t,n){for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,o=0;o<t.length;o++){var o,a=t[o];a!==e&&(a.parent=e,e.parts.push(a))}if(1!==e.parts.length){if(n=void 0===n||n){var s=[];for(o=0;o<t.length;o++)s=s.concat(t[o].vertices);r.clockwiseSort(s);var l=r.hull(s),u=r.centre(l);i.setVertices(e,l),r.translate(e.vertices,u)}var c=i._totalProperties(e);e.area=c.area,e.parent=e,e.position.x=c.centre.x,e.position.y=c.centre.y,e.positionPrev.x=c.centre.x,e.positionPrev.y=c.centre.y,i.setMass(e,c.mass),i.setInertia(e,c.inertia),i.setPosition(e,c.centre)}},i.setCentre=function(e,t,n){n?(e.positionPrev.x+=t.x,e.positionPrev.y+=t.y,e.position.x+=t.x,e.position.y+=t.y):(e.positionPrev.x=t.x-(e.position.x-e.positionPrev.x),e.positionPrev.y=t.y-(e.position.y-e.positionPrev.y),e.position.x=t.x,e.position.y=t.y)},i.setPosition=function(e,t,n){var o=a.sub(t,e.position);n?(e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.velocity.x=o.x,e.velocity.y=o.y,e.speed=a.magnitude(o)):(e.positionPrev.x+=o.x,e.positionPrev.y+=o.y);for(var i=0;i<e.parts.length;i++){var s=e.parts[i];s.position.x+=o.x,s.position.y+=o.y,r.translate(s.vertices,o),u.update(s.bounds,s.vertices,e.velocity)}},i.setAngle=function(e,t,n){var o=t-e.angle;n?(e.anglePrev=e.angle,e.angularVelocity=o,e.angularSpeed=Math.abs(o)):e.anglePrev+=o;for(var i=0;i<e.parts.length;i++){var s=e.parts[i];s.angle+=o,r.rotate(s.vertices,o,e.position),c.rotate(s.axes,o),u.update(s.bounds,s.vertices,e.velocity),i>0&&a.rotateAbout(s.position,o,e.position,s.position)}},i.setVelocity=function(e,t){var n=e.deltaTime/i._baseDelta;e.positionPrev.x=e.position.x-t.x*n,e.positionPrev.y=e.position.y-t.y*n,e.velocity.x=(e.position.x-e.positionPrev.x)/n,e.velocity.y=(e.position.y-e.positionPrev.y)/n,e.speed=a.magnitude(e.velocity)},i.getVelocity=function(e){var t=i._baseDelta/e.deltaTime;return{x:(e.position.x-e.positionPrev.x)*t,y:(e.position.y-e.positionPrev.y)*t}},i.getSpeed=function(e){return a.magnitude(i.getVelocity(e))},i.setSpeed=function(e,t){i.setVelocity(e,a.mult(a.normalise(i.getVelocity(e)),t))},i.setAngularVelocity=function(e,t){var n=e.deltaTime/i._baseDelta;e.anglePrev=e.angle-t*n,e.angularVelocity=(e.angle-e.anglePrev)/n,e.angularSpeed=Math.abs(e.angularVelocity)},i.getAngularVelocity=function(e){return(e.angle-e.anglePrev)*i._baseDelta/e.deltaTime},i.getAngularSpeed=function(e){return Math.abs(i.getAngularVelocity(e))},i.setAngularSpeed=function(e,t){i.setAngularVelocity(e,l.sign(i.getAngularVelocity(e))*t)},i.translate=function(e,t,n){i.setPosition(e,a.add(e.position,t),n)},i.rotate=function(e,t,n,o){if(n){var r=Math.cos(t),a=Math.sin(t),s=e.position.x-n.x,l=e.position.y-n.y;i.setPosition(e,{x:n.x+(s*r-l*a),y:n.y+(s*a+l*r)},o),i.setAngle(e,e.angle+t,o)}else i.setAngle(e,e.angle+t,o)},i.scale=function(e,t,n,o){var a=0,s=0;o=o||e.position;for(var l=0;l<e.parts.length;l++){var d=e.parts[l];r.scale(d.vertices,t,n,o),d.axes=c.fromVertices(d.vertices),d.area=r.area(d.vertices),i.setMass(d,e.density*d.area),r.translate(d.vertices,{x:-d.position.x,y:-d.position.y}),i.setInertia(d,i._inertiaScale*r.inertia(d.vertices,d.mass)),r.translate(d.vertices,{x:d.position.x,y:d.position.y}),l>0&&(a+=d.area,s+=d.inertia),d.position.x=o.x+(d.position.x-o.x)*t,d.position.y=o.y+(d.position.y-o.y)*n,u.update(d.bounds,d.vertices,e.velocity)}e.parts.length>1&&(e.area=a,e.isStatic||(i.setMass(e,e.density*a),i.setInertia(e,s))),e.circleRadius&&(t===n?e.circleRadius*=t:e.circleRadius=null)},i.update=function(e,t){var n=(t=(void 0!==t?t:1e3/60)*e.timeScale)*t,o=i._timeCorrection?t/(e.deltaTime||t):1,s=1-e.frictionAir*(t/l._baseDelta),d=(e.position.x-e.positionPrev.x)*o,p=(e.position.y-e.positionPrev.y)*o;e.velocity.x=d*s+e.force.x/e.mass*n,e.velocity.y=p*s+e.force.y/e.mass*n,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.deltaTime=t,e.angularVelocity=(e.angle-e.anglePrev)*s*o+e.torque/e.inertia*n,e.anglePrev=e.angle,e.angle+=e.angularVelocity;for(var f=0;f<e.parts.length;f++){var h=e.parts[f];r.translate(h.vertices,e.velocity),f>0&&(h.position.x+=e.velocity.x,h.position.y+=e.velocity.y),0!==e.angularVelocity&&(r.rotate(h.vertices,e.angularVelocity,e.position),c.rotate(h.axes,e.angularVelocity),f>0&&a.rotateAbout(h.position,e.angularVelocity,e.position,h.position)),u.update(h.bounds,h.vertices,e.velocity)}},i.updateVelocities=function(e){var t=i._baseDelta/e.deltaTime,n=e.velocity;n.x=(e.position.x-e.positionPrev.x)*t,n.y=(e.position.y-e.positionPrev.y)*t,e.speed=Math.sqrt(n.x*n.x+n.y*n.y),e.angularVelocity=(e.angle-e.anglePrev)*t,e.angularSpeed=Math.abs(e.angularVelocity)},i.applyForce=function(e,t,n){var o={x:t.x-e.position.x,y:t.y-e.position.y};e.force.x+=n.x,e.force.y+=n.y,e.torque+=o.x*n.y-o.y*n.x},i._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=+(1!==e.parts.length);n<e.parts.length;n++){var o=e.parts[n],i=o.mass!==1/0?o.mass:1;t.mass+=i,t.area+=o.area,t.inertia+=o.inertia,t.centre=a.add(t.centre,a.mult(o.position,i))}return t.centre=a.div(t.centre,t.mass),t}},function(e,t,n){var o={};e.exports=o;var i=n(0);o.on=function(e,t,n){for(var o,i=t.split(" "),r=0;r<i.length;r++)o=i[r],e.events=e.events||{},e.events[o]=e.events[o]||[],e.events[o].push(n);return n},o.off=function(e,t,n){if(!t){e.events={};return}"function"==typeof t&&(n=t,t=i.keys(e.events).join(" "));for(var o=t.split(" "),r=0;r<o.length;r++){var a=e.events[o[r]],s=[];if(n&&a)for(var l=0;l<a.length;l++)a[l]!==n&&s.push(a[l]);e.events[o[r]]=s}},o.trigger=function(e,t,n){var o,r,a,s,l=e.events;if(l&&i.keys(l).length>0){n||(n={}),o=t.split(" ");for(var u=0;u<o.length;u++)if(a=l[r=o[u]]){(s=i.clone(n,!1)).name=r,s.source=e;for(var c=0;c<a.length;c++)a[c].apply(e,[s])}}}},function(e,t,n){var o={};e.exports=o;var i=n(5),r=n(0),a=n(1),s=n(4);o.create=function(e){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},e)},o.setModified=function(e,t,n,i){if(e.isModified=t,t&&e.cache&&(e.cache.allBodies=null,e.cache.allConstraints=null,e.cache.allComposites=null),n&&e.parent&&o.setModified(e.parent,t,n,i),i)for(var r=0;r<e.composites.length;r++){var a=e.composites[r];o.setModified(a,t,n,i)}},o.add=function(e,t){var n=[].concat(t);i.trigger(e,"beforeAdd",{object:t});for(var a=0;a<n.length;a++){var s=n[a];switch(s.type){case"body":if(s.parent!==s){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(e,s);break;case"constraint":o.addConstraint(e,s);break;case"composite":o.addComposite(e,s);break;case"mouseConstraint":o.addConstraint(e,s.constraint)}}return i.trigger(e,"afterAdd",{object:t}),e},o.remove=function(e,t,n){var r=[].concat(t);i.trigger(e,"beforeRemove",{object:t});for(var a=0;a<r.length;a++){var s=r[a];switch(s.type){case"body":o.removeBody(e,s,n);break;case"constraint":o.removeConstraint(e,s,n);break;case"composite":o.removeComposite(e,s,n);break;case"mouseConstraint":o.removeConstraint(e,s.constraint)}}return i.trigger(e,"afterRemove",{object:t}),e},o.addComposite=function(e,t){return e.composites.push(t),t.parent=e,o.setModified(e,!0,!0,!1),e},o.removeComposite=function(e,t,n){var i=r.indexOf(e.composites,t);if(-1!==i){var a=o.allBodies(t);o.removeCompositeAt(e,i);for(var s=0;s<a.length;s++)a[s].sleepCounter=0}if(n)for(var s=0;s<e.composites.length;s++)o.removeComposite(e.composites[s],t,!0);return e},o.removeCompositeAt=function(e,t){return e.composites.splice(t,1),o.setModified(e,!0,!0,!1),e},o.addBody=function(e,t){return e.bodies.push(t),o.setModified(e,!0,!0,!1),e},o.removeBody=function(e,t,n){var i=r.indexOf(e.bodies,t);if(-1!==i&&(o.removeBodyAt(e,i),t.sleepCounter=0),n)for(var a=0;a<e.composites.length;a++)o.removeBody(e.composites[a],t,!0);return e},o.removeBodyAt=function(e,t){return e.bodies.splice(t,1),o.setModified(e,!0,!0,!1),e},o.addConstraint=function(e,t){return e.constraints.push(t),o.setModified(e,!0,!0,!1),e},o.removeConstraint=function(e,t,n){var i=r.indexOf(e.constraints,t);if(-1!==i&&o.removeConstraintAt(e,i),n)for(var a=0;a<e.composites.length;a++)o.removeConstraint(e.composites[a],t,!0);return e},o.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),o.setModified(e,!0,!0,!1),e},o.clear=function(e,t,n){if(n)for(var i=0;i<e.composites.length;i++)o.clear(e.composites[i],t,!0);return t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,o.setModified(e,!0,!0,!1),e},o.allBodies=function(e){if(e.cache&&e.cache.allBodies)return e.cache.allBodies;for(var t=[].concat(e.bodies),n=0;n<e.composites.length;n++)t=t.concat(o.allBodies(e.composites[n]));return e.cache&&(e.cache.allBodies=t),t},o.allConstraints=function(e){if(e.cache&&e.cache.allConstraints)return e.cache.allConstraints;for(var t=[].concat(e.constraints),n=0;n<e.composites.length;n++)t=t.concat(o.allConstraints(e.composites[n]));return e.cache&&(e.cache.allConstraints=t),t},o.allComposites=function(e){if(e.cache&&e.cache.allComposites)return e.cache.allComposites;for(var t=[].concat(e.composites),n=0;n<e.composites.length;n++)t=t.concat(o.allComposites(e.composites[n]));return e.cache&&(e.cache.allComposites=t),t},o.get=function(e,t,n){var i,r;switch(n){case"body":i=o.allBodies(e);break;case"constraint":i=o.allConstraints(e);break;case"composite":i=o.allComposites(e).concat(e)}return i?0===(r=i.filter(function(e){return e.id.toString()===t.toString()})).length?null:r[0]:null},o.move=function(e,t,n){return o.remove(e,t),o.add(n,t),e},o.rebase=function(e){for(var t=o.allBodies(e).concat(o.allConstraints(e)).concat(o.allComposites(e)),n=0;n<t.length;n++)t[n].id=r.nextId();return e},o.translate=function(e,t,n){for(var i=n?o.allBodies(e):e.bodies,r=0;r<i.length;r++)s.translate(i[r],t);return e},o.rotate=function(e,t,n,i){for(var r=Math.cos(t),a=Math.sin(t),l=i?o.allBodies(e):e.bodies,u=0;u<l.length;u++){var c=l[u],d=c.position.x-n.x,p=c.position.y-n.y;s.setPosition(c,{x:n.x+(d*r-p*a),y:n.y+(d*a+p*r)}),s.rotate(c,t)}return e},o.scale=function(e,t,n,i,r){for(var a=r?o.allBodies(e):e.bodies,l=0;l<a.length;l++){var u=a[l],c=u.position.x-i.x,d=u.position.y-i.y;s.setPosition(u,{x:i.x+c*t,y:i.y+d*n}),s.scale(u,t,n)}return e},o.bounds=function(e){for(var t=o.allBodies(e),n=[],i=0;i<t.length;i+=1){var r=t[i];n.push(r.bounds.min,r.bounds.max)}return a.create(n)}},function(e,t,n){var o={};e.exports=o;var i=n(4),r=n(5),a=n(0);o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(e,t){for(var n=t/a._baseDelta,r=o._motionSleepThreshold,s=0;s<e.length;s++){var l=e[s],u=i.getSpeed(l),c=i.getAngularSpeed(l),d=u*u+c*c;if(0!==l.force.x||0!==l.force.y){o.set(l,!1);continue}var p=Math.min(l.motion,d),f=Math.max(l.motion,d);l.motion=o._minBias*p+(1-o._minBias)*f,l.sleepThreshold>0&&l.motion<r?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/n&&o.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},o.afterCollisions=function(e){for(var t=o._motionSleepThreshold,n=0;n<e.length;n++){var i=e[n];if(i.isActive){var r=i.collision,a=r.bodyA.parent,s=r.bodyB.parent;if((!a.isSleeping||!s.isSleeping)&&!a.isStatic&&!s.isStatic&&(a.isSleeping||s.isSleeping)){var l=a.isSleeping&&!a.isStatic?a:s,u=l===a?s:a;!l.isStatic&&u.motion>t&&o.set(l,!1)}}}},o.set=function(e,t){var n=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,n||r.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,n&&r.trigger(e,"sleepEnd"))}},function(e,t,n){var o,i,r,a={};e.exports=a;var s=n(3),l=n(9);o=[],i={overlap:0,axis:null},r={overlap:0,axis:null},a.create=function(e,t){return{pair:null,collided:!1,bodyA:e,bodyB:t,parentA:e.parent,parentB:t.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},a.collides=function(e,t,n){if(a._overlapAxes(i,e.vertices,t.vertices,e.axes),i.overlap<=0||(a._overlapAxes(r,t.vertices,e.vertices,t.axes),r.overlap<=0))return null;var o,u,c=n&&n.table[l.id(e,t)];c?u=c.collision:((u=a.create(e,t)).collided=!0,u.bodyA=e.id<t.id?e:t,u.bodyB=e.id<t.id?t:e,u.parentA=u.bodyA.parent,u.parentB=u.bodyB.parent),e=u.bodyA,t=u.bodyB,o=i.overlap<r.overlap?i:r;var d=u.normal,p=u.tangent,f=u.penetration,h=u.supports,m=o.overlap,v=o.axis,y=v.x,g=v.y;y*(t.position.x-e.position.x)+g*(t.position.y-e.position.y)>=0&&(y=-y,g=-g),d.x=y,d.y=g,p.x=-g,p.y=y,f.x=y*m,f.y=g*m,u.depth=m;var _=a._findSupports(e,t,d,1),x=0;if(s.contains(e.vertices,_[0])&&(h[x++]=_[0]),s.contains(e.vertices,_[1])&&(h[x++]=_[1]),x<2){var b=a._findSupports(t,e,d,-1);s.contains(t.vertices,b[0])&&(h[x++]=b[0]),x<2&&s.contains(t.vertices,b[1])&&(h[x++]=b[1])}return 0===x&&(h[x++]=_[0]),u.supportCount=x,u},a._overlapAxes=function(e,t,n,o){var i,r,a,s,l,u,c=t.length,d=n.length,p=t[0].x,f=t[0].y,h=n[0].x,m=n[0].y,v=o.length,y=Number.MAX_VALUE,g=0;for(l=0;l<v;l++){var _=o[l],x=_.x,b=_.y,w=p*x+f*b,A=h*x+m*b,S=w,P=A;for(u=1;u<c;u+=1)(s=t[u].x*x+t[u].y*b)>S?S=s:s<w&&(w=s);for(u=1;u<d;u+=1)(s=n[u].x*x+n[u].y*b)>P?P=s:s<A&&(A=s);if((i=(r=S-A)<(a=P-w)?r:a)<y&&(y=i,g=l,i<=0))break}e.axis=o[g],e.overlap=y},a._findSupports=function(e,t,n,i){var r,a,s,l=t.vertices,u=l.length,c=e.position.x,d=e.position.y,p=n.x*i,f=n.y*i,h=l[0],m=h,v=p*(c-m.x)+f*(d-m.y);for(s=1;s<u;s+=1)(a=p*(c-(m=l[s]).x)+f*(d-m.y))<v&&(v=a,h=m);return(v=p*(c-(r=l[(u+h.index-1)%u]).x)+f*(d-r.y),p*(c-(m=l[(h.index+1)%u]).x)+f*(d-m.y)<v)?(o[0]=h,o[1]=m):(o[0]=h,o[1]=r),o}},function(e,t,n){var o={};e.exports=o;var i=n(16);o.create=function(e,t){var n=e.bodyA,r=e.bodyB,a={id:o.id(n,r),bodyA:n,bodyB:r,collision:e,contacts:[i.create(),i.create()],contactCount:0,separation:0,isActive:!0,isSensor:n.isSensor||r.isSensor,timeCreated:t,timeUpdated:t,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return o.update(a,e,t),a},o.update=function(e,t,n){var o=t.supports,i=t.supportCount,r=e.contacts,a=t.parentA,s=t.parentB;e.isActive=!0,e.timeUpdated=n,e.collision=t,e.separation=t.depth,e.inverseMass=a.inverseMass+s.inverseMass,e.friction=a.friction<s.friction?a.friction:s.friction,e.frictionStatic=a.frictionStatic>s.frictionStatic?a.frictionStatic:s.frictionStatic,e.restitution=a.restitution>s.restitution?a.restitution:s.restitution,e.slop=a.slop>s.slop?a.slop:s.slop,e.contactCount=i,t.pair=e;var l=o[0],u=r[0],c=o[1],d=r[1];(d.vertex===l||u.vertex===c)&&(r[1]=u,r[0]=u=d,d=r[1]),u.vertex=l,d.vertex=c},o.setActive=function(e,t,n){t?(e.isActive=!0,e.timeUpdated=n):(e.isActive=!1,e.contactCount=0)},o.id=function(e,t){return e.id<t.id?e.id.toString(36)+":"+t.id.toString(36):t.id.toString(36)+":"+e.id.toString(36)}},function(e,t,n){var o={};e.exports=o;var i=n(3),r=n(2),a=n(7),s=n(1),l=n(11),u=n(0);o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(e){e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var t=e.bodyA?r.add(e.bodyA.position,e.pointA):e.pointA,n=e.bodyB?r.add(e.bodyB.position,e.pointB):e.pointB,o=r.magnitude(r.sub(t,n));e.length=void 0!==e.length?e.length:o,e.id=e.id||u.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(e.length>0?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var i={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===e.length&&e.stiffness>.1?(i.type="pin",i.anchors=!1):e.stiffness<.9&&(i.type="spring"),e.render=u.extend(i,e.render),e},o.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var n=e[t],o=n.constraintImpulse;n.isStatic||0===o.x&&0===o.y&&0===o.angle||(n.position.x+=o.x,n.position.y+=o.y,n.angle+=o.angle)}},o.solveAll=function(e,t){for(var n=u.clamp(t/u._baseDelta,0,1),i=0;i<e.length;i+=1){var r=e[i],a=!r.bodyA||r.bodyA&&r.bodyA.isStatic,s=!r.bodyB||r.bodyB&&r.bodyB.isStatic;(a||s)&&o.solve(e[i],n)}for(i=0;i<e.length;i+=1)a=!(r=e[i]).bodyA||r.bodyA&&r.bodyA.isStatic,s=!r.bodyB||r.bodyB&&r.bodyB.isStatic,a||s||o.solve(e[i],n)},o.solve=function(e,t){var n=e.bodyA,i=e.bodyB,a=e.pointA,s=e.pointB;if(n||i){n&&!n.isStatic&&(r.rotate(a,n.angle-e.angleA,a),e.angleA=n.angle),i&&!i.isStatic&&(r.rotate(s,i.angle-e.angleB,s),e.angleB=i.angle);var l=a,u=s;if(n&&(l=r.add(n.position,a)),i&&(u=r.add(i.position,s)),l&&u){var c=r.sub(l,u),d=r.magnitude(c);d<o._minLength&&(d=o._minLength);var p,f,h,m,v,y=(d-e.length)/d,g=e.stiffness>=1||0===e.length?e.stiffness*t:e.stiffness*t*t,_=e.damping*t,x=r.mult(c,y*g),b=(n?n.inverseMass:0)+(i?i.inverseMass:0),w=b+((n?n.inverseInertia:0)+(i?i.inverseInertia:0));if(_>0){var A=r.create();h=r.div(c,d),v=r.sub(i&&r.sub(i.position,i.positionPrev)||A,n&&r.sub(n.position,n.positionPrev)||A),m=r.dot(h,v)}n&&!n.isStatic&&(f=n.inverseMass/b,n.constraintImpulse.x-=x.x*f,n.constraintImpulse.y-=x.y*f,n.position.x-=x.x*f,n.position.y-=x.y*f,_>0&&(n.positionPrev.x-=_*h.x*m*f,n.positionPrev.y-=_*h.y*m*f),p=r.cross(a,x)/w*o._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle-=p,n.angle-=p),i&&!i.isStatic&&(f=i.inverseMass/b,i.constraintImpulse.x+=x.x*f,i.constraintImpulse.y+=x.y*f,i.position.x+=x.x*f,i.position.y+=x.y*f,_>0&&(i.positionPrev.x+=_*h.x*m*f,i.positionPrev.y+=_*h.y*m*f),p=r.cross(s,x)/w*o._torqueDampen*i.inverseInertia*(1-e.angularStiffness),i.constraintImpulse.angle+=p,i.angle+=p)}}},o.postSolveAll=function(e){for(var t=0;t<e.length;t++){var n=e[t],u=n.constraintImpulse;if(!n.isStatic&&(0!==u.x||0!==u.y||0!==u.angle)){a.set(n,!1);for(var c=0;c<n.parts.length;c++){var d=n.parts[c];i.translate(d.vertices,u),c>0&&(d.position.x+=u.x,d.position.y+=u.y),0!==u.angle&&(i.rotate(d.vertices,u.angle,n.position),l.rotate(d.axes,u.angle),c>0&&r.rotateAbout(d.position,u.angle,n.position,d.position)),s.update(d.bounds,d.vertices,n.velocity)}u.angle*=o._warming,u.x*=o._warming,u.y*=o._warming}}},o.pointAWorld=function(e){return{x:(e.bodyA?e.bodyA.position.x:0)+(e.pointA?e.pointA.x:0),y:(e.bodyA?e.bodyA.position.y:0)+(e.pointA?e.pointA.y:0)}},o.pointBWorld=function(e){return{x:(e.bodyB?e.bodyB.position.x:0)+(e.pointB?e.pointB.x:0),y:(e.bodyB?e.bodyB.position.y:0)+(e.pointB?e.pointB.y:0)}},o.currentLength=function(e){var t=(e.bodyA?e.bodyA.position.x:0)+(e.pointA?e.pointA.x:0),n=(e.bodyA?e.bodyA.position.y:0)+(e.pointA?e.pointA.y:0),o=(e.bodyB?e.bodyB.position.x:0)+(e.pointB?e.pointB.x:0),i=(e.bodyB?e.bodyB.position.y:0)+(e.pointB?e.pointB.y:0),r=t-o,a=n-i;return Math.sqrt(r*r+a*a)}},function(e,t,n){var o={};e.exports=o;var i=n(2),r=n(0);o.fromVertices=function(e){for(var t={},n=0;n<e.length;n++){var o=(n+1)%e.length,a=i.normalise({x:e[o].y-e[n].y,y:e[n].x-e[o].x}),s=0===a.y?1/0:a.x/a.y;t[s=s.toFixed(3).toString()]=a}return r.values(t)},o.rotate=function(e,t){if(0!==t)for(var n=Math.cos(t),o=Math.sin(t),i=0;i<e.length;i++){var r,a=e[i];r=a.x*n-a.y*o,a.y=a.x*o+a.y*n,a.x=r}}},function(e,t,n){var o={};e.exports=o;var i=n(3),r=n(0),a=n(4),s=n(1),l=n(2);o.rectangle=function(e,t,n,o,s){s=s||{};var l={label:"Rectangle Body",position:{x:e,y:t},vertices:i.fromPath("L 0 0 L "+n+" 0 L "+n+" "+o+" L 0 "+o)};if(s.chamfer){var u=s.chamfer;l.vertices=i.chamfer(l.vertices,u.radius,u.quality,u.qualityMin,u.qualityMax),delete s.chamfer}return a.create(r.extend({},l,s))},o.trapezoid=function(e,t,n,o,s,l){l=l||{},s>=1&&r.warn("Bodies.trapezoid: slope parameter must be < 1.");var u,c=(1-2*(s*=.5))*n,d=n*s,p=d+c,f=p+d;u=s<.5?"L 0 0 L "+d+" "+-o+" L "+p+" "+-o+" L "+f+" 0":"L 0 0 L "+p+" "+-o+" L "+f+" 0";var h={label:"Trapezoid Body",position:{x:e,y:t},vertices:i.fromPath(u)};if(l.chamfer){var m=l.chamfer;h.vertices=i.chamfer(h.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete l.chamfer}return a.create(r.extend({},h,l))},o.circle=function(e,t,n,i,a){i=i||{};var s=Math.ceil(Math.max(10,Math.min(a=a||25,n)));return s%2==1&&(s+=1),o.polygon(e,t,s,n,r.extend({},{label:"Circle Body",circleRadius:n},i))},o.polygon=function(e,t,n,s,l){if(l=l||{},n<3)return o.circle(e,t,s,l);for(var u=2*Math.PI/n,c="",d=.5*u,p=0;p<n;p+=1){var f=d+p*u,h=Math.cos(f)*s,m=Math.sin(f)*s;c+="L "+h.toFixed(3)+" "+m.toFixed(3)+" "}var v={label:"Polygon Body",position:{x:e,y:t},vertices:i.fromPath(c)};if(l.chamfer){var y=l.chamfer;v.vertices=i.chamfer(v.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete l.chamfer}return a.create(r.extend({},v,l))},o.fromVertices=function(e,t,n,o,u,c,d,p){var f,h,m,v,y,g,_,x,b,w,A=r.getDecomp();for(f=!!(A&&A.quickDecomp),o=o||{},m=[],u=void 0!==u&&u,c=void 0!==c?c:.01,d=void 0!==d?d:10,p=void 0!==p?p:.01,r.isArray(n[0])||(n=[n]),b=0;b<n.length;b+=1)if(y=n[b],(v=i.isConvex(y))||f||r.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),v||!f)y=v?i.clockwiseSort(y):i.hull(y),m.push({position:{x:e,y:t},vertices:y});else{var S=y.map(function(e){return[e.x,e.y]});A.makeCCW(S),!1!==c&&A.removeCollinearPoints(S,c),!1!==p&&A.removeDuplicatePoints&&A.removeDuplicatePoints(S,p);var P=A.quickDecomp(S);for(g=0;g<P.length;g++){var T=P[g].map(function(e){return{x:e[0],y:e[1]}});d>0&&i.area(T)<d||m.push({position:i.centre(T),vertices:T})}}for(g=0;g<m.length;g++)m[g]=a.create(r.extend(m[g],o));if(u)for(g=0;g<m.length;g++){var B=m[g];for(_=g+1;_<m.length;_++){var M=m[_];if(s.overlaps(B.bounds,M.bounds)){var k=B.vertices,I=M.vertices;for(x=0;x<B.vertices.length;x++)for(w=0;w<M.vertices.length;w++){var C=l.magnitudeSquared(l.sub(k[(x+1)%k.length],I[w])),D=l.magnitudeSquared(l.sub(k[x],I[(w+1)%I.length]));C<5&&D<5&&(k[x].isInternal=!0,I[w].isInternal=!0)}}}}return m.length>1?(h=a.create(r.extend({parts:m.slice(0)},o)),a.setPosition(h,{x:e,y:t}),h):m[0]}},function(e,t,n){var o={};e.exports=o;var i=n(0),r=n(8);o.create=function(e){return i.extend({bodies:[],collisions:[],pairs:null},e)},o.setBodies=function(e,t){e.bodies=t.slice(0)},o.clear=function(e){e.bodies=[],e.collisions=[]},o.collisions=function(e){var t,n,i=e.pairs,a=e.bodies,s=a.length,l=o.canCollide,u=r.collides,c=e.collisions,d=0;for(a.sort(o._compareBoundsX),t=0;t<s;t++){var p=a[t],f=p.bounds,h=p.bounds.max.x,m=p.bounds.max.y,v=p.bounds.min.y,y=p.isStatic||p.isSleeping,g=p.parts.length,_=1===g;for(n=t+1;n<s;n++){var x=a[n],b=x.bounds;if(b.min.x>h)break;if(!(m<b.min.y)&&!(v>b.max.y)&&(!y||!x.isStatic&&!x.isSleeping)&&l(p.collisionFilter,x.collisionFilter)){var w=x.parts.length;if(_&&1===w){var A=u(p,x,i);A&&(c[d++]=A)}else for(var S=+(g>1),P=+(w>1),T=S;T<g;T++)for(var B=p.parts[T],f=B.bounds,M=P;M<w;M++){var k=x.parts[M],b=k.bounds;if(!(f.min.x>b.max.x)&&!(f.max.x<b.min.x)&&!(f.max.y<b.min.y)&&!(f.min.y>b.max.y)){var A=u(B,k,i);A&&(c[d++]=A)}}}}}return c.length!==d&&(c.length=d),c},o.canCollide=function(e,t){return e.group===t.group&&0!==e.group?e.group>0:(e.mask&t.category)!=0&&(t.mask&e.category)!=0},o._compareBoundsX=function(e,t){return e.bounds.min.x-t.bounds.min.x}},function(e,t,n){var o={};e.exports=o;var i=n(0);o.create=function(e){var t={};return e||i.log("Mouse.create: element was undefined, defaulting to document.body","warn"),t.element=e||document.body,t.absolute={x:0,y:0},t.position={x:0,y:0},t.mousedownPosition={x:0,y:0},t.mouseupPosition={x:0,y:0},t.offset={x:0,y:0},t.scale={x:1,y:1},t.wheelDelta=0,t.button=-1,t.pixelRatio=parseInt(t.element.getAttribute("data-pixel-ratio"),10)||1,t.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},t.mousemove=function(e){var n=o._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&(t.button=0,e.preventDefault()),t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.sourceEvents.mousemove=e},t.mousedown=function(e){var n=o._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches?(t.button=0,e.preventDefault()):t.button=e.button,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mousedownPosition.x=t.position.x,t.mousedownPosition.y=t.position.y,t.sourceEvents.mousedown=e},t.mouseup=function(e){var n=o._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&e.preventDefault(),t.button=-1,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mouseupPosition.x=t.position.x,t.mouseupPosition.y=t.position.y,t.sourceEvents.mouseup=e},t.mousewheel=function(e){t.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault(),t.sourceEvents.mousewheel=e},o.setElement(t,t.element),t},o.setElement=function(e,t){e.element=t,t.addEventListener("mousemove",e.mousemove,{passive:!0}),t.addEventListener("mousedown",e.mousedown,{passive:!0}),t.addEventListener("mouseup",e.mouseup,{passive:!0}),t.addEventListener("wheel",e.mousewheel,{passive:!1}),t.addEventListener("touchmove",e.mousemove,{passive:!1}),t.addEventListener("touchstart",e.mousedown,{passive:!1}),t.addEventListener("touchend",e.mouseup,{passive:!1})},o.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},o.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},o.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},o._getRelativeMousePosition=function(e,t,n){var o,i,r=t.getBoundingClientRect(),a=document.documentElement||document.body.parentNode||document.body,s=void 0!==window.pageXOffset?window.pageXOffset:a.scrollLeft,l=void 0!==window.pageYOffset?window.pageYOffset:a.scrollTop,u=e.changedTouches;return u?(o=u[0].pageX-r.left-s,i=u[0].pageY-r.top-l):(o=e.pageX-r.left-s,i=e.pageY-r.top-l),{x:o/(t.clientWidth/(t.width||t.clientWidth)*n),y:i/(t.clientHeight/(t.height||t.clientHeight)*n)}}},function(e,t,n){var o={};e.exports=o;var i=n(0);o._registry={},o.register=function(e){if(o.isPlugin(e)||i.warn("Plugin.register:",o.toString(e),"does not implement all required fields."),e.name in o._registry){var t=o._registry[e.name],n=o.versionParse(e.version).number,r=o.versionParse(t.version).number;n>r?(i.warn("Plugin.register:",o.toString(t),"was upgraded to",o.toString(e)),o._registry[e.name]=e):n<r?i.warn("Plugin.register:",o.toString(t),"can not be downgraded to",o.toString(e)):e!==t&&i.warn("Plugin.register:",o.toString(e),"is already registered to different plugin object")}else o._registry[e.name]=e;return e},o.resolve=function(e){return o._registry[o.dependencyParse(e).name]},o.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},o.isPlugin=function(e){return e&&e.name&&e.version&&e.install},o.isUsed=function(e,t){return e.used.indexOf(t)>-1},o.isFor=function(e,t){var n=e.for&&o.dependencyParse(e.for);return!e.for||t.name===n.name&&o.versionSatisfies(t.version,n.range)},o.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0===e.uses.length)return void i.warn("Plugin.use:",o.toString(e),"does not specify any dependencies to install.");for(var n=o.dependencies(e),r=i.topologicalSort(n),a=[],s=0;s<r.length;s+=1)if(r[s]!==e.name){var l=o.resolve(r[s]);if(!l){a.push("❌ "+r[s]);continue}o.isUsed(e,l.name)||(o.isFor(l,e)||(i.warn("Plugin.use:",o.toString(l),"is for",l.for,"but installed on",o.toString(e)+"."),l._warned=!0),l.install?l.install(e):(i.warn("Plugin.use:",o.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(a.push("🔶 "+o.toString(l)),delete l._warned):a.push("✅ "+o.toString(l)),e.used.push(l.name))}a.length>0&&i.info(a.join("  "))},o.dependencies=function(e,t){var n=o.dependencyParse(e),r=n.name;if(!(r in(t=t||{}))){e=o.resolve(e)||e,t[r]=i.map(e.uses||[],function(t){o.isPlugin(t)&&o.register(t);var r=o.dependencyParse(t),a=o.resolve(t);return a&&!o.versionSatisfies(a.version,r.range)?(i.warn("Plugin.dependencies:",o.toString(a),"does not satisfy",o.toString(r),"used by",o.toString(n)+"."),a._warned=!0,e._warned=!0):a||(i.warn("Plugin.dependencies:",o.toString(t),"used by",o.toString(n),"could not be resolved."),e._warned=!0),r.name});for(var a=0;a<t[r].length;a+=1)o.dependencies(t[r][a],t);return t}},o.dependencyParse=function(e){return i.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(e)||i.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},o.versionParse=function(e){var t=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;t.test(e)||i.warn("Plugin.versionParse:",e,"is not a valid version or range.");var n=t.exec(e),o=Number(n[4]),r=Number(n[5]),a=Number(n[6]);return{isRange:!!(n[1]||n[2]),version:n[3],range:e,operator:n[1]||n[2]||"",major:o,minor:r,patch:a,parts:[o,r,a],prerelease:n[7],number:1e8*o+1e4*r+a}},o.versionSatisfies=function(e,t){t=t||"*";var n=o.versionParse(t),i=o.versionParse(e);if(n.isRange){if("*"===n.operator||"*"===e)return!0;if(">"===n.operator)return i.number>n.number;if(">="===n.operator)return i.number>=n.number;if("~"===n.operator)return i.major===n.major&&i.minor===n.minor&&i.patch>=n.patch;if("^"===n.operator)return n.major>0?i.major===n.major&&i.number>=n.number:n.minor>0?i.minor===n.minor&&i.patch>=n.patch:i.patch===n.patch}return e===t||"*"===e}},function(e,t){var n={};e.exports=n,n.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}},function(e,t,n){var o={};e.exports=o;var i=n(7),r=n(18),a=n(13),s=n(19),l=n(5),u=n(6),c=n(10),d=n(0),p=n(4);o._deltaMax=1e3/60,o.create=function(e){e=e||{};var t=d.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},e);return t.world=e.world||u.create({label:"World"}),t.pairs=e.pairs||s.create(),t.detector=e.detector||a.create(),t.detector.pairs=t.pairs,t.grid={buckets:[]},t.world.gravity=t.gravity,t.broadphase=t.grid,t.metrics={},t},o.update=function(e,t){var n,p=d.now(),f=e.world,h=e.detector,m=e.pairs,v=e.timing,y=v.timestamp;t>o._deltaMax&&d.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",o._deltaMax.toFixed(3),"ms."),t=(void 0!==t?t:d._baseDelta)*v.timeScale,v.timestamp+=t,v.lastDelta=t;var g={timestamp:v.timestamp,delta:t};l.trigger(e,"beforeUpdate",g);var _=u.allBodies(f),x=u.allConstraints(f);for(f.isModified&&(a.setBodies(h,_),u.setModified(f,!1,!1,!0)),e.enableSleeping&&i.update(_,t),o._bodiesApplyGravity(_,e.gravity),t>0&&o._bodiesUpdate(_,t),l.trigger(e,"beforeSolve",g),c.preSolveAll(_),n=0;n<e.constraintIterations;n++)c.solveAll(x,t);c.postSolveAll(_);var b=a.collisions(h);s.update(m,b,y),e.enableSleeping&&i.afterCollisions(m.list),m.collisionStart.length>0&&l.trigger(e,"collisionStart",{pairs:m.collisionStart,timestamp:v.timestamp,delta:t});var w=d.clamp(20/e.positionIterations,0,1);for(r.preSolvePosition(m.list),n=0;n<e.positionIterations;n++)r.solvePosition(m.list,t,w);for(r.postSolvePosition(_),c.preSolveAll(_),n=0;n<e.constraintIterations;n++)c.solveAll(x,t);for(c.postSolveAll(_),r.preSolveVelocity(m.list),n=0;n<e.velocityIterations;n++)r.solveVelocity(m.list,t);return o._bodiesUpdateVelocities(_),m.collisionActive.length>0&&l.trigger(e,"collisionActive",{pairs:m.collisionActive,timestamp:v.timestamp,delta:t}),m.collisionEnd.length>0&&l.trigger(e,"collisionEnd",{pairs:m.collisionEnd,timestamp:v.timestamp,delta:t}),o._bodiesClearForces(_),l.trigger(e,"afterUpdate",g),e.timing.lastElapsed=d.now()-p,e},o.merge=function(e,t){if(d.extend(e,t),t.world){e.world=t.world,o.clear(e);for(var n=u.allBodies(e.world),r=0;r<n.length;r++){var a=n[r];i.set(a,!1),a.id=d.nextId()}}},o.clear=function(e){s.clear(e.pairs),a.clear(e.detector)},o._bodiesClearForces=function(e){for(var t=e.length,n=0;n<t;n++){var o=e[n];o.force.x=0,o.force.y=0,o.torque=0}},o._bodiesApplyGravity=function(e,t){var n=void 0!==t.scale?t.scale:.001,o=e.length;if((0!==t.x||0!==t.y)&&0!==n)for(var i=0;i<o;i++){var r=e[i];r.isStatic||r.isSleeping||(r.force.y+=r.mass*t.y*n,r.force.x+=r.mass*t.x*n)}},o._bodiesUpdate=function(e,t){for(var n=e.length,o=0;o<n;o++){var i=e[o];i.isStatic||i.isSleeping||p.update(i,t)}},o._bodiesUpdateVelocities=function(e){for(var t=e.length,n=0;n<t;n++)p.updateVelocities(e[n])}},function(e,t,n){var o={};e.exports=o;var i=n(3),r=n(0),a=n(1);o._restingThresh=2,o._restingThreshTangent=Math.sqrt(6),o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o._frictionMaxStatic=Number.MAX_VALUE,o.preSolvePosition=function(e){var t,n,o,i=e.length;for(t=0;t<i;t++)(n=e[t]).isActive&&(o=n.contactCount,n.collision.parentA.totalContacts+=o,n.collision.parentB.totalContacts+=o)},o.solvePosition=function(e,t,n){var i,a,s,l,u,c,d,p,f=o._positionDampen*(n||1),h=r.clamp(t/r._baseDelta,0,1),m=e.length;for(i=0;i<m;i++)(a=e[i]).isActive&&!a.isSensor&&(l=(s=a.collision).parentA,u=s.parentB,c=s.normal,a.separation=s.depth+c.x*(u.positionImpulse.x-l.positionImpulse.x)+c.y*(u.positionImpulse.y-l.positionImpulse.y));for(i=0;i<m;i++)(a=e[i]).isActive&&!a.isSensor&&(l=(s=a.collision).parentA,u=s.parentB,c=s.normal,p=a.separation-a.slop*h,(l.isStatic||u.isStatic)&&(p*=2),l.isStatic||l.isSleeping||(d=f/l.totalContacts,l.positionImpulse.x+=c.x*p*d,l.positionImpulse.y+=c.y*p*d),u.isStatic||u.isSleeping||(d=f/u.totalContacts,u.positionImpulse.x-=c.x*p*d,u.positionImpulse.y-=c.y*p*d))},o.postSolvePosition=function(e){for(var t=o._positionWarming,n=e.length,r=i.translate,s=a.update,l=0;l<n;l++){var u=e[l],c=u.positionImpulse,d=c.x,p=c.y,f=u.velocity;if(u.totalContacts=0,0!==d||0!==p){for(var h=0;h<u.parts.length;h++){var m=u.parts[h];r(m.vertices,c),s(m.bounds,m.vertices,f),m.position.x+=d,m.position.y+=p}u.positionPrev.x+=d,u.positionPrev.y+=p,d*f.x+p*f.y<0?(c.x=0,c.y=0):(c.x*=t,c.y*=t)}}},o.preSolveVelocity=function(e){var t,n,o=e.length;for(t=0;t<o;t++){var i=e[t];if(i.isActive&&!i.isSensor){var r=i.contacts,a=i.contactCount,s=i.collision,l=s.parentA,u=s.parentB,c=s.normal,d=s.tangent;for(n=0;n<a;n++){var p=r[n],f=p.vertex,h=p.normalImpulse,m=p.tangentImpulse;if(0!==h||0!==m){var v=c.x*h+d.x*m,y=c.y*h+d.y*m;l.isStatic||l.isSleeping||(l.positionPrev.x+=v*l.inverseMass,l.positionPrev.y+=y*l.inverseMass,l.anglePrev+=l.inverseInertia*((f.x-l.position.x)*y-(f.y-l.position.y)*v)),u.isStatic||u.isSleeping||(u.positionPrev.x-=v*u.inverseMass,u.positionPrev.y-=y*u.inverseMass,u.anglePrev-=u.inverseInertia*((f.x-u.position.x)*y-(f.y-u.position.y)*v))}}}}},o.solveVelocity=function(e,t){var n,i,a,s,l=t/r._baseDelta,u=l*l*l,c=-o._restingThresh*l,d=o._restingThreshTangent,p=o._frictionNormalMultiplier*l,f=o._frictionMaxStatic,h=e.length;for(a=0;a<h;a++){var m=e[a];if(m.isActive&&!m.isSensor){var v=m.collision,y=v.parentA,g=v.parentB,_=v.normal.x,x=v.normal.y,b=v.tangent.x,w=v.tangent.y,A=m.inverseMass,S=m.friction*m.frictionStatic*p,P=m.contacts,T=m.contactCount,B=1/T,M=y.position.x-y.positionPrev.x,k=y.position.y-y.positionPrev.y,I=y.angle-y.anglePrev,C=g.position.x-g.positionPrev.x,D=g.position.y-g.positionPrev.y,E=g.angle-g.anglePrev;for(s=0;s<T;s++){var R=P[s],L=R.vertex,F=L.x-y.position.x,O=L.y-y.position.y,H=L.x-g.position.x,V=L.y-g.position.y,q=M-O*I-(C-V*E),G=k+F*I-(D+H*E),U=_*q+x*G,W=b*q+w*G,j=m.separation+U,N=Math.min(j,1),X=(N=j<0?0:N)*S;W<-X||W>X?(i=W>0?W:-W,(n=m.friction*(W>0?1:-1)*u)<-i?n=-i:n>i&&(n=i)):(n=W,i=f);var z=F*x-O*_,$=H*x-V*_,Y=B/(A+y.inverseInertia*z*z+g.inverseInertia*$*$),Q=(1+m.restitution)*U*Y;if(n*=Y,U<c)R.normalImpulse=0;else{var Z=R.normalImpulse;R.normalImpulse+=Q,R.normalImpulse>0&&(R.normalImpulse=0),Q=R.normalImpulse-Z}if(W<-d||W>d)R.tangentImpulse=0;else{var K=R.tangentImpulse;R.tangentImpulse+=n,R.tangentImpulse<-i&&(R.tangentImpulse=-i),R.tangentImpulse>i&&(R.tangentImpulse=i),n=R.tangentImpulse-K}var J=_*Q+b*n,ee=x*Q+w*n;y.isStatic||y.isSleeping||(y.positionPrev.x+=J*y.inverseMass,y.positionPrev.y+=ee*y.inverseMass,y.anglePrev+=(F*ee-O*J)*y.inverseInertia),g.isStatic||g.isSleeping||(g.positionPrev.x-=J*g.inverseMass,g.positionPrev.y-=ee*g.inverseMass,g.anglePrev-=(H*ee-V*J)*g.inverseInertia)}}}}},function(e,t,n){var o={};e.exports=o;var i=n(9),r=n(0);o.create=function(e){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},o.update=function(e,t,n){var o,r,a,s=i.update,l=i.create,u=i.setActive,c=e.table,d=e.list,p=d.length,f=p,h=e.collisionStart,m=e.collisionEnd,v=e.collisionActive,y=t.length,g=0,_=0,x=0;for(a=0;a<y;a++)(r=(o=t[a]).pair)?(r.isActive&&(v[x++]=r),s(r,o,n)):(c[(r=l(o,n)).id]=r,h[g++]=r,d[f++]=r);for(a=0,f=0,p=d.length;a<p;a++)(r=d[a]).timeUpdated>=n?d[f++]=r:(u(r,!1,n),r.collision.bodyA.sleepCounter>0&&r.collision.bodyB.sleepCounter>0?d[f++]=r:(m[_++]=r,delete c[r.id]));d.length!==f&&(d.length=f),h.length!==g&&(h.length=g),m.length!==_&&(m.length=_),v.length!==x&&(v.length=x)},o.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},function(e,t,n){var o=e.exports=n(21);o.Axes=n(11),o.Bodies=n(12),o.Body=n(4),o.Bounds=n(1),o.Collision=n(8),o.Common=n(0),o.Composite=n(6),o.Composites=n(22),o.Constraint=n(10),o.Contact=n(16),o.Detector=n(13),o.Engine=n(17),o.Events=n(5),o.Grid=n(23),o.Mouse=n(14),o.MouseConstraint=n(24),o.Pair=n(9),o.Pairs=n(19),o.Plugin=n(15),o.Query=n(25),o.Render=n(26),o.Resolver=n(18),o.Runner=n(27),o.SAT=n(28),o.Sleeping=n(7),o.Svg=n(29),o.Vector=n(2),o.Vertices=n(3),o.World=n(30),o.Engine.run=o.Runner.run,o.Common.deprecated(o.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(e,t,n){var o={};e.exports=o;var i=n(15),r=n(0);o.name="matter-js",o.version="0.20.0",o.uses=[],o.used=[],o.use=function(){i.use(o,Array.prototype.slice.call(arguments))},o.before=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathBefore(o,e,t)},o.after=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathAfter(o,e,t)}},function(e,t,n){var o={};e.exports=o;var i=n(6),r=n(10),a=n(0),s=n(4),l=n(12),u=a.deprecated;o.stack=function(e,t,n,o,r,a,l){for(var u,c=i.create({label:"Stack"}),d=e,p=t,f=0,h=0;h<o;h++){for(var m=0,v=0;v<n;v++){var y=l(d,p,v,h,u,f);if(y){var g=y.bounds.max.y-y.bounds.min.y,_=y.bounds.max.x-y.bounds.min.x;g>m&&(m=g),s.translate(y,{x:.5*_,y:.5*g}),d=y.bounds.max.x+r,i.addBody(c,y),u=y,f+=1}else d+=r}p+=m+a,d=e}return c},o.chain=function(e,t,n,o,s,l){for(var u=e.bodies,c=1;c<u.length;c++){var d=u[c-1],p=u[c],f=d.bounds.max.y-d.bounds.min.y,h=d.bounds.max.x-d.bounds.min.x,m=p.bounds.max.y-p.bounds.min.y,v=p.bounds.max.x-p.bounds.min.x,y={bodyA:d,pointA:{x:h*t,y:f*n},bodyB:p,pointB:{x:v*o,y:m*s}},g=a.extend(y,l);i.addConstraint(e,r.create(g))}return e.label+=" Chain",e},o.mesh=function(e,t,n,o,s){var l,u,c,d,p,f=e.bodies;for(l=0;l<n;l++){for(u=1;u<t;u++)c=f[u-1+l*t],d=f[u+l*t],i.addConstraint(e,r.create(a.extend({bodyA:c,bodyB:d},s)));if(l>0)for(u=0;u<t;u++)c=f[u+(l-1)*t],d=f[u+l*t],i.addConstraint(e,r.create(a.extend({bodyA:c,bodyB:d},s))),o&&u>0&&(p=f[u-1+(l-1)*t],i.addConstraint(e,r.create(a.extend({bodyA:p,bodyB:d},s)))),o&&u<t-1&&(p=f[u+1+(l-1)*t],i.addConstraint(e,r.create(a.extend({bodyA:p,bodyB:d},s))))}return e.label+=" Mesh",e},o.pyramid=function(e,t,n,i,r,a,l){return o.stack(e,t,n,i,r,a,function(t,o,a,u,c,d){var p=Math.min(i,Math.ceil(n/2)),f=c?c.bounds.max.x-c.bounds.min.x:0;if(!(u>p)){var h=u=p-u,m=n-1-u;if(!(a<h)&&!(a>m))return 1===d&&s.translate(c,{x:(a+(n%2==1?1:-1))*f,y:0}),l(e+(c?a*f:0)+a*r,o,a,u,c,d)}})},o.newtonsCradle=function(e,t,n,o,a){for(var s=i.create({label:"Newtons Cradle"}),u=0;u<n;u++){var c=l.circle(e+1.9*o*u,t+a,o,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),d=r.create({pointA:{x:e+1.9*o*u,y:t},bodyB:c});i.addBody(s,c),i.addConstraint(s,d)}return s},u(o,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),o.car=function(e,t,n,o,a){var u=s.nextGroup(!0),c=-(.5*n)+20,d=.5*n-20,p=i.create({label:"Car"}),f=l.rectangle(e,t,n,o,{collisionFilter:{group:u},chamfer:{radius:.5*o},density:2e-4}),h=l.circle(e+c,t+0,a,{collisionFilter:{group:u},friction:.8}),m=l.circle(e+d,t+0,a,{collisionFilter:{group:u},friction:.8}),v=r.create({bodyB:f,pointB:{x:c,y:0},bodyA:h,stiffness:1,length:0}),y=r.create({bodyB:f,pointB:{x:d,y:0},bodyA:m,stiffness:1,length:0});return i.addBody(p,f),i.addBody(p,h),i.addBody(p,m),i.addConstraint(p,v),i.addConstraint(p,y),p},u(o,"car","Composites.car ➤ moved to car example"),o.softBody=function(e,t,n,i,r,s,u,c,d,p){d=a.extend({inertia:1/0},d),p=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},p);var f=o.stack(e,t,n,i,r,s,function(e,t){return l.circle(e,t,c,d)});return o.mesh(f,n,i,u,p),f.label="Soft Body",f},u(o,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")},function(e,t,n){var o={};e.exports=o;var i=n(9),r=n(0),a=r.deprecated;o.create=function(e){return r.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},e)},o.update=function(e,t,n,i){var r,a,s,l,u,c=n.world,d=e.buckets,p=!1;for(r=0;r<t.length;r++){var f=t[r];if((!f.isSleeping||i)&&(!c.bounds||!(f.bounds.max.x<c.bounds.min.x)&&!(f.bounds.min.x>c.bounds.max.x)&&!(f.bounds.max.y<c.bounds.min.y)&&!(f.bounds.min.y>c.bounds.max.y))){var h=o._getRegion(e,f);if(!f.region||h.id!==f.region.id||i){(!f.region||i)&&(f.region=h);var m=o._regionUnion(h,f.region);for(a=m.startCol;a<=m.endCol;a++)for(s=m.startRow;s<=m.endRow;s++){l=d[u=o._getBucketId(a,s)];var v=a>=h.startCol&&a<=h.endCol&&s>=h.startRow&&s<=h.endRow,y=a>=f.region.startCol&&a<=f.region.endCol&&s>=f.region.startRow&&s<=f.region.endRow;!v&&y&&y&&l&&o._bucketRemoveBody(e,l,f),(f.region===h||v&&!y||i)&&(l||(l=o._createBucket(d,u)),o._bucketAddBody(e,l,f))}f.region=h,p=!0}}}p&&(e.pairsList=o._createActivePairsList(e))},a(o,"update","Grid.update ➤ replaced by Matter.Detector"),o.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},a(o,"clear","Grid.clear ➤ replaced by Matter.Detector"),o._regionUnion=function(e,t){var n=Math.min(e.startCol,t.startCol),i=Math.max(e.endCol,t.endCol),r=Math.min(e.startRow,t.startRow),a=Math.max(e.endRow,t.endRow);return o._createRegion(n,i,r,a)},o._getRegion=function(e,t){var n=t.bounds,i=Math.floor(n.min.x/e.bucketWidth),r=Math.floor(n.max.x/e.bucketWidth),a=Math.floor(n.min.y/e.bucketHeight),s=Math.floor(n.max.y/e.bucketHeight);return o._createRegion(i,r,a,s)},o._createRegion=function(e,t,n,o){return{id:e+","+t+","+n+","+o,startCol:e,endCol:t,startRow:n,endRow:o}},o._getBucketId=function(e,t){return"C"+e+"R"+t},o._createBucket=function(e,t){return e[t]=[]},o._bucketAddBody=function(e,t,n){var o,r=e.pairs,a=i.id,s=t.length;for(o=0;o<s;o++){var l=t[o];if(n.id!==l.id&&(!n.isStatic||!l.isStatic)){var u=a(n,l),c=r[u];c?c[2]+=1:r[u]=[n,l,1]}}t.push(n)},o._bucketRemoveBody=function(e,t,n){var o,a=e.pairs,s=i.id;t.splice(r.indexOf(t,n),1);var l=t.length;for(o=0;o<l;o++){var u=a[s(n,t[o])];u&&(u[2]-=1)}},o._createActivePairsList=function(e){var t,n,o=e.pairs,i=r.keys(o),a=i.length,s=[];for(n=0;n<a;n++)(t=o[i[n]])[2]>0?s.push(t):delete o[i[n]];return s}},function(e,t,n){var o={};e.exports=o;var i=n(3),r=n(7),a=n(14),s=n(5),l=n(13),u=n(10),c=n(6),d=n(0),p=n(1);o.create=function(e,t){var n=(e?e.mouse:null)||(t?t.mouse:null);n||(e&&e.render&&e.render.canvas?n=a.create(e.render.canvas):t&&t.element?n=a.create(t.element):(n=a.create(),d.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var i=u.create({label:"Mouse Constraint",pointA:n.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),r={type:"mouseConstraint",mouse:n,element:null,body:null,constraint:i,collisionFilter:{category:1,mask:0xffffffff,group:0}},l=d.extend(r,t);return s.on(e,"beforeUpdate",function(){var t=c.allBodies(e.world);o.update(l,t),o._triggerEvents(l)}),l},o.update=function(e,t){var n=e.mouse,o=e.constraint,a=e.body;if(0===n.button){if(o.bodyB)r.set(o.bodyB,!1),o.pointA=n.position;else for(var u=0;u<t.length;u++)if(a=t[u],p.contains(a.bounds,n.position)&&l.canCollide(a.collisionFilter,e.collisionFilter))for(var c=+(a.parts.length>1);c<a.parts.length;c++){var d=a.parts[c];if(i.contains(d.vertices,n.position)){o.pointA=n.position,o.bodyB=e.body=a,o.pointB={x:n.position.x-a.position.x,y:n.position.y-a.position.y},o.angleB=a.angle,r.set(a,!1),s.trigger(e,"startdrag",{mouse:n,body:a});break}}}else o.bodyB=e.body=null,o.pointB=null,a&&s.trigger(e,"enddrag",{mouse:n,body:a})},o._triggerEvents=function(e){var t=e.mouse,n=t.sourceEvents;n.mousemove&&s.trigger(e,"mousemove",{mouse:t}),n.mousedown&&s.trigger(e,"mousedown",{mouse:t}),n.mouseup&&s.trigger(e,"mouseup",{mouse:t}),a.clearSourceEvents(t)}},function(e,t,n){var o={};e.exports=o;var i=n(2),r=n(8),a=n(1),s=n(12),l=n(3);o.collides=function(e,t){for(var n=[],o=t.length,i=e.bounds,s=r.collides,l=a.overlaps,u=0;u<o;u++){var c=t[u],d=c.parts.length,p=+(1!==d);if(l(c.bounds,i))for(var f=p;f<d;f++){var h=c.parts[f];if(l(h.bounds,i)){var m=s(h,e);if(m){n.push(m);break}}}}return n},o.ray=function(e,t,n,r){r=r||1e-100;for(var a=i.angle(t,n),l=i.magnitude(i.sub(t,n)),u=(n.x+t.x)*.5,c=(n.y+t.y)*.5,d=s.rectangle(u,c,l,r,{angle:a}),p=o.collides(d,e),f=0;f<p.length;f+=1){var h=p[f];h.body=h.bodyB=h.bodyA}return p},o.region=function(e,t,n){for(var o=[],i=0;i<e.length;i++){var r=e[i],s=a.overlaps(r.bounds,t);(s&&!n||!s&&n)&&o.push(r)}return o},o.point=function(e,t){for(var n=[],o=0;o<e.length;o++){var i=e[o];if(a.contains(i.bounds,t))for(var r=+(1!==i.parts.length);r<i.parts.length;r++){var s=i.parts[r];if(a.contains(s.bounds,t)&&l.contains(s.vertices,t)){n.push(i);break}}}return n}},function(e,t,n){var o,i,r,a,s,l,u,c,d={};e.exports=d;var p=n(4),f=n(0),h=n(6),m=n(1),v=n(5),y=n(2),g=n(14);"undefined"!=typeof window&&(o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(f.now())},1e3/60)},i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),d._goodFps=30,d._goodDelta=1e3/60,d.create=function(e){var t={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},n=f.extend(t,e);return n.canvas&&(n.canvas.width=n.options.width||n.canvas.width,n.canvas.height=n.options.height||n.canvas.height),n.mouse=e.mouse,n.engine=e.engine,n.canvas=n.canvas||s(n.options.width,n.options.height),n.context=n.canvas.getContext("2d"),n.textures={},n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.canvas.width,y:n.canvas.height}},n.controller=d,n.options.showBroadphase=!1,1!==n.options.pixelRatio&&d.setPixelRatio(n,n.options.pixelRatio),f.isElement(n.element)&&n.element.appendChild(n.canvas),n},d.run=function(e){!function t(n){e.frameRequestId=o(t),r(e,n),d.world(e,n),e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0),(e.options.showStats||e.options.showDebug)&&d.stats(e,e.context,n),(e.options.showPerformance||e.options.showDebug)&&d.performance(e,e.context,n),e.context.setTransform(1,0,0,1,0,0)}()},d.stop=function(e){i(e.frameRequestId)},d.setPixelRatio=function(e,t){var n=e.options,o=e.canvas;"auto"===t&&(t=l(o)),n.pixelRatio=t,o.setAttribute("data-pixel-ratio",t),o.width=n.width*t,o.height=n.height*t,o.style.width=n.width+"px",o.style.height=n.height+"px"},d.setSize=function(e,t,n){e.options.width=t,e.options.height=n,e.bounds.max.x=e.bounds.min.x+t,e.bounds.max.y=e.bounds.min.y+n,1!==e.options.pixelRatio?d.setPixelRatio(e,e.options.pixelRatio):(e.canvas.width=t,e.canvas.height=n)},d.lookAt=function(e,t,n,o){o=void 0===o||o,t=f.isArray(t)?t:[t],n=n||{x:0,y:0};for(var i={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},r=0;r<t.length;r+=1){var a=t[r],s=a.bounds?a.bounds.min:a.min||a.position||a,l=a.bounds?a.bounds.max:a.max||a.position||a;s&&l&&(s.x<i.min.x&&(i.min.x=s.x),l.x>i.max.x&&(i.max.x=l.x),s.y<i.min.y&&(i.min.y=s.y),l.y>i.max.y&&(i.max.y=l.y))}var u=i.max.x-i.min.x+2*n.x,c=i.max.y-i.min.y+2*n.y,d=e.canvas.height,p=e.canvas.width/d,h=u/c,m=1,v=1;h>p?v=h/p:m=p/h,e.options.hasBounds=!0,e.bounds.min.x=i.min.x,e.bounds.max.x=i.min.x+u*m,e.bounds.min.y=i.min.y,e.bounds.max.y=i.min.y+c*v,o&&(e.bounds.min.x+=.5*u-u*m*.5,e.bounds.max.x+=.5*u-u*m*.5,e.bounds.min.y+=.5*c-c*v*.5,e.bounds.max.y+=.5*c-c*v*.5),e.bounds.min.x-=n.x,e.bounds.max.x-=n.x,e.bounds.min.y-=n.y,e.bounds.max.y-=n.y,e.mouse&&(g.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),g.setOffset(e.mouse,e.bounds.min))},d.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,o=t/e.options.width,i=n/e.options.height;e.context.setTransform(e.options.pixelRatio/o,0,0,e.options.pixelRatio/i,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},d.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},d.world=function(e,t){var n,o=f.now(),i=e.engine,r=i.world,a=e.canvas,s=e.context,l=e.options,u=e.timing,p=h.allBodies(r),_=h.allConstraints(r),x=l.wireframes?l.wireframeBackground:l.background,b=[],w=[],A={timestamp:i.timing.timestamp};if(v.trigger(e,"beforeRender",A),e.currentBackground!==x&&c(e,x),s.globalCompositeOperation="source-in",s.fillStyle="transparent",s.fillRect(0,0,a.width,a.height),s.globalCompositeOperation="source-over",l.hasBounds){for(n=0;n<p.length;n++){var S=p[n];m.overlaps(S.bounds,e.bounds)&&b.push(S)}for(n=0;n<_.length;n++){var P=_[n],T=P.bodyA,B=P.bodyB,M=P.pointA,k=P.pointB;T&&(M=y.add(T.position,P.pointA)),B&&(k=y.add(B.position,P.pointB)),M&&k&&(m.contains(e.bounds,M)||m.contains(e.bounds,k))&&w.push(P)}d.startViewTransform(e),e.mouse&&(g.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.options.width,y:(e.bounds.max.y-e.bounds.min.y)/e.options.height}),g.setOffset(e.mouse,e.bounds.min))}else w=_,b=p,1!==e.options.pixelRatio&&e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0);!l.wireframes||i.enableSleeping&&l.showSleeping?d.bodies(e,b,s):(l.showConvexHulls&&d.bodyConvexHulls(e,b,s),d.bodyWireframes(e,b,s)),l.showBounds&&d.bodyBounds(e,b,s),(l.showAxes||l.showAngleIndicator)&&d.bodyAxes(e,b,s),l.showPositions&&d.bodyPositions(e,b,s),l.showVelocity&&d.bodyVelocity(e,b,s),l.showIds&&d.bodyIds(e,b,s),l.showSeparations&&d.separations(e,i.pairs.list,s),l.showCollisions&&d.collisions(e,i.pairs.list,s),l.showVertexNumbers&&d.vertexNumbers(e,b,s),l.showMousePosition&&d.mousePosition(e,e.mouse,s),d.constraints(w,s),l.hasBounds&&d.endViewTransform(e),v.trigger(e,"afterRender",A),u.lastElapsed=f.now()-o},d.stats=function(e,t,n){for(var o=e.engine,i=o.world,r=h.allBodies(i),a=0,s=0,l=0;l<r.length;l+=1)a+=r[l].parts.length;var u={Part:a,Body:r.length,Cons:h.allConstraints(i).length,Comp:h.allComposites(i).length,Pair:o.pairs.list.length};for(var c in t.fillStyle="#0e0f19",t.fillRect(s,0,302.5,44),t.font="12px Arial",t.textBaseline="top",t.textAlign="right",u){var d=u[c];t.fillStyle="#aaa",t.fillText(c,s+55,8),t.fillStyle="#eee",t.fillText(d,s+55,26),s+=55}},d.performance=function(e,t){var n=e.engine,o=e.timing,i=o.deltaHistory,r=o.elapsedHistory,s=o.timestampElapsedHistory,l=o.engineDeltaHistory,u=o.engineUpdatesHistory,c=o.engineElapsedHistory,p=n.timing.lastUpdatesPerFrame,h=n.timing.lastDelta,m=a(i),v=a(r),y=a(l),g=a(u),_=a(c),x=a(s)/m||0,b=Math.round(m/h),w=1e3/m||0;t.fillStyle="#0e0f19",t.fillRect(0,50,442,34),d.status(t,10,69,60,4,i.length,Math.round(w)+" fps",w/d._goodFps,function(e){return i[e]/m-1}),d.status(t,82,69,60,4,l.length,h.toFixed(2)+" dt",d._goodDelta/h,function(e){return l[e]/y-1}),d.status(t,154,69,60,4,u.length,p+" upf",Math.pow(f.clamp(g/b||1,0,1),4),function(e){return u[e]/g-1}),d.status(t,226,69,60,4,c.length,_.toFixed(2)+" ut",1-p*_/d._goodFps,function(e){return c[e]/_-1}),d.status(t,298,69,60,4,r.length,v.toFixed(2)+" rt",1-v/d._goodFps,function(e){return r[e]/v-1}),d.status(t,370,69,60,4,s.length,x.toFixed(2)+" x",x*x*x,function(e){return(s[e]/i[e]/x||0)-1})},d.status=function(e,t,n,o,i,r,a,s,l){e.strokeStyle="#888",e.fillStyle="#444",e.lineWidth=1,e.fillRect(t,n+7,o,1),e.beginPath(),e.moveTo(t,n+7-i*f.clamp(.4*l(0),-2,2));for(var u=0;u<o;u+=1)e.lineTo(t+u,n+7-(u<r?i*f.clamp(.4*l(u),-2,2):0));e.stroke(),e.fillStyle="hsl("+f.clamp(25+95*s,0,120)+",100%,60%)",e.fillRect(t,n-7,4,4),e.font="12px Arial",e.textBaseline="middle",e.textAlign="right",e.fillStyle="#eee",e.fillText(a,t+o,n-5)},d.constraints=function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.render.visible&&o.pointA&&o.pointB){var i,r,a=o.bodyA,s=o.bodyB;if(i=a?y.add(a.position,o.pointA):o.pointA,"pin"===o.render.type)t.beginPath(),t.arc(i.x,i.y,3,0,2*Math.PI),t.closePath();else{if(r=s?y.add(s.position,o.pointB):o.pointB,t.beginPath(),t.moveTo(i.x,i.y),"spring"===o.render.type)for(var l,u=y.sub(r,i),c=y.perp(y.normalise(u)),d=Math.ceil(f.clamp(o.length/5,12,20)),p=1;p<d;p+=1)l=p%2==0?1:-1,t.lineTo(i.x+u.x*(p/d)+c.x*l*4,i.y+u.y*(p/d)+c.y*l*4);t.lineTo(r.x,r.y)}o.render.lineWidth&&(t.lineWidth=o.render.lineWidth,t.strokeStyle=o.render.strokeStyle,t.stroke()),o.render.anchors&&(t.fillStyle=o.render.strokeStyle,t.beginPath(),t.arc(i.x,i.y,3,0,2*Math.PI),t.arc(r.x,r.y,3,0,2*Math.PI),t.closePath(),t.fill())}}},d.bodies=function(e,t,n){e.engine;var o,i,r,a,s=e.options,l=s.showInternalEdges||!s.wireframes;for(r=0;r<t.length;r++)if((o=t[r]).render.visible){for(a=+(o.parts.length>1);a<o.parts.length;a++)if((i=o.parts[a]).render.visible){if(s.showSleeping&&o.isSleeping?n.globalAlpha=.5*i.render.opacity:1!==i.render.opacity&&(n.globalAlpha=i.render.opacity),i.render.sprite&&i.render.sprite.texture&&!s.wireframes){var c=i.render.sprite,d=u(e,c.texture);n.translate(i.position.x,i.position.y),n.rotate(i.angle),n.drawImage(d,-(d.width*c.xOffset)*c.xScale,-(d.height*c.yOffset)*c.yScale,d.width*c.xScale,d.height*c.yScale),n.rotate(-i.angle),n.translate(-i.position.x,-i.position.y)}else{if(i.circleRadius)n.beginPath(),n.arc(i.position.x,i.position.y,i.circleRadius,0,2*Math.PI);else{n.beginPath(),n.moveTo(i.vertices[0].x,i.vertices[0].y);for(var p=1;p<i.vertices.length;p++)!i.vertices[p-1].isInternal||l?n.lineTo(i.vertices[p].x,i.vertices[p].y):n.moveTo(i.vertices[p].x,i.vertices[p].y),i.vertices[p].isInternal&&!l&&n.moveTo(i.vertices[(p+1)%i.vertices.length].x,i.vertices[(p+1)%i.vertices.length].y);n.lineTo(i.vertices[0].x,i.vertices[0].y),n.closePath()}s.wireframes?(n.lineWidth=1,n.strokeStyle=e.options.wireframeStrokeStyle,n.stroke()):(n.fillStyle=i.render.fillStyle,i.render.lineWidth&&(n.lineWidth=i.render.lineWidth,n.strokeStyle=i.render.strokeStyle,n.stroke()),n.fill())}n.globalAlpha=1}}},d.bodyWireframes=function(e,t,n){var o,i,r,a,s,l=e.options.showInternalEdges;for(n.beginPath(),r=0;r<t.length;r++)if((o=t[r]).render.visible)for(s=+(o.parts.length>1);s<o.parts.length;s++){for(i=o.parts[s],n.moveTo(i.vertices[0].x,i.vertices[0].y),a=1;a<i.vertices.length;a++)!i.vertices[a-1].isInternal||l?n.lineTo(i.vertices[a].x,i.vertices[a].y):n.moveTo(i.vertices[a].x,i.vertices[a].y),i.vertices[a].isInternal&&!l&&n.moveTo(i.vertices[(a+1)%i.vertices.length].x,i.vertices[(a+1)%i.vertices.length].y);n.lineTo(i.vertices[0].x,i.vertices[0].y)}n.lineWidth=1,n.strokeStyle=e.options.wireframeStrokeStyle,n.stroke()},d.bodyConvexHulls=function(e,t,n){var o,i,r;for(n.beginPath(),i=0;i<t.length;i++)if((o=t[i]).render.visible&&1!==o.parts.length){for(n.moveTo(o.vertices[0].x,o.vertices[0].y),r=1;r<o.vertices.length;r++)n.lineTo(o.vertices[r].x,o.vertices[r].y);n.lineTo(o.vertices[0].x,o.vertices[0].y)}n.lineWidth=1,n.strokeStyle="rgba(255,255,255,0.2)",n.stroke()},d.vertexNumbers=function(e,t,n){var o,i,r;for(o=0;o<t.length;o++){var a=t[o].parts;for(r=+(a.length>1);r<a.length;r++){var s=a[r];for(i=0;i<s.vertices.length;i++)n.fillStyle="rgba(255,255,255,0.2)",n.fillText(o+"_"+i,s.position.x+(s.vertices[i].x-s.position.x)*.8,s.position.y+(s.vertices[i].y-s.position.y)*.8)}}},d.mousePosition=function(e,t,n){n.fillStyle="rgba(255,255,255,0.8)",n.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},d.bodyBounds=function(e,t,n){e.engine;var o=e.options;n.beginPath();for(var i=0;i<t.length;i++)if(t[i].render.visible)for(var r=t[i].parts,a=+(r.length>1);a<r.length;a++){var s=r[a];n.rect(s.bounds.min.x,s.bounds.min.y,s.bounds.max.x-s.bounds.min.x,s.bounds.max.y-s.bounds.min.y)}o.wireframes?n.strokeStyle="rgba(255,255,255,0.08)":n.strokeStyle="rgba(0,0,0,0.1)",n.lineWidth=1,n.stroke()},d.bodyAxes=function(e,t,n){e.engine;var o,i,r,a,s=e.options;for(n.beginPath(),i=0;i<t.length;i++){var l=t[i],u=l.parts;if(l.render.visible)if(s.showAxes)for(r=+(u.length>1);r<u.length;r++)for(a=0,o=u[r];a<o.axes.length;a++){var c=o.axes[a];n.moveTo(o.position.x,o.position.y),n.lineTo(o.position.x+20*c.x,o.position.y+20*c.y)}else for(r=+(u.length>1);r<u.length;r++)for(a=0,o=u[r];a<o.axes.length;a++)n.moveTo(o.position.x,o.position.y),n.lineTo((o.vertices[0].x+o.vertices[o.vertices.length-1].x)/2,(o.vertices[0].y+o.vertices[o.vertices.length-1].y)/2)}s.wireframes?(n.strokeStyle="indianred",n.lineWidth=1):(n.strokeStyle="rgba(255, 255, 255, 0.4)",n.globalCompositeOperation="overlay",n.lineWidth=2),n.stroke(),n.globalCompositeOperation="source-over"},d.bodyPositions=function(e,t,n){e.engine;var o,i,r,a,s=e.options;for(n.beginPath(),r=0;r<t.length;r++)if((o=t[r]).render.visible)for(a=0;a<o.parts.length;a++)i=o.parts[a],n.arc(i.position.x,i.position.y,3,0,2*Math.PI,!1),n.closePath();for(s.wireframes?n.fillStyle="indianred":n.fillStyle="rgba(0,0,0,0.5)",n.fill(),n.beginPath(),r=0;r<t.length;r++)(o=t[r]).render.visible&&(n.arc(o.positionPrev.x,o.positionPrev.y,2,0,2*Math.PI,!1),n.closePath());n.fillStyle="rgba(255,165,0,0.8)",n.fill()},d.bodyVelocity=function(e,t,n){n.beginPath();for(var o=0;o<t.length;o++){var i=t[o];if(i.render.visible){var r=p.getVelocity(i);n.moveTo(i.position.x,i.position.y),n.lineTo(i.position.x+r.x,i.position.y+r.y)}}n.lineWidth=3,n.strokeStyle="cornflowerblue",n.stroke()},d.bodyIds=function(e,t,n){var o,i;for(o=0;o<t.length;o++)if(t[o].render.visible){var r=t[o].parts;for(i=+(r.length>1);i<r.length;i++){var a=r[i];n.font="12px Arial",n.fillStyle="rgba(255,255,255,0.5)",n.fillText(a.id,a.position.x+10,a.position.y-10)}}},d.collisions=function(e,t,n){var o,i,r,a,s=e.options;for(n.beginPath(),r=0;r<t.length;r++)if((o=t[r]).isActive)for(a=0,i=o.collision;a<o.contactCount;a++){var l=o.contacts[a].vertex;n.rect(l.x-1.5,l.y-1.5,3.5,3.5)}for(s.wireframes?n.fillStyle="rgba(255,255,255,0.7)":n.fillStyle="orange",n.fill(),n.beginPath(),r=0;r<t.length;r++)if((o=t[r]).isActive&&(i=o.collision,o.contactCount>0)){var u=o.contacts[0].vertex.x,c=o.contacts[0].vertex.y;2===o.contactCount&&(u=(o.contacts[0].vertex.x+o.contacts[1].vertex.x)/2,c=(o.contacts[0].vertex.y+o.contacts[1].vertex.y)/2),i.bodyB===i.supports[0].body||!0===i.bodyA.isStatic?n.moveTo(u-8*i.normal.x,c-8*i.normal.y):n.moveTo(u+8*i.normal.x,c+8*i.normal.y),n.lineTo(u,c)}s.wireframes?n.strokeStyle="rgba(255,165,0,0.7)":n.strokeStyle="orange",n.lineWidth=1,n.stroke()},d.separations=function(e,t,n){var o,i,r,a,s,l=e.options;for(n.beginPath(),s=0;s<t.length;s++)if((o=t[s]).isActive){r=(i=o.collision).bodyA;var u=1;(a=i.bodyB).isStatic||r.isStatic||(u=.5),a.isStatic&&(u=0),n.moveTo(a.position.x,a.position.y),n.lineTo(a.position.x-i.penetration.x*u,a.position.y-i.penetration.y*u),u=1,a.isStatic||r.isStatic||(u=.5),r.isStatic&&(u=0),n.moveTo(r.position.x,r.position.y),n.lineTo(r.position.x+i.penetration.x*u,r.position.y+i.penetration.y*u)}l.wireframes?n.strokeStyle="rgba(255,165,0,0.5)":n.strokeStyle="orange",n.stroke()},d.inspector=function(e,t){e.engine;var n,o=e.selected,i=e.render,r=i.options;if(r.hasBounds){var a=i.bounds.max.x-i.bounds.min.x,s=i.bounds.max.y-i.bounds.min.y,l=a/i.options.width,u=s/i.options.height;t.scale(1/l,1/u),t.translate(-i.bounds.min.x,-i.bounds.min.y)}for(var c=0;c<o.length;c++){var d=o[c].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),d.type){case"body":n=d.bounds,t.beginPath(),t.rect(Math.floor(n.min.x-3),Math.floor(n.min.y-3),Math.floor(n.max.x-n.min.x+6),Math.floor(n.max.y-n.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var p=d.pointA;d.bodyA&&(p=d.pointB),t.beginPath(),t.arc(p.x,p.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",n=e.selectBounds,t.beginPath(),t.rect(Math.floor(n.min.x),Math.floor(n.min.y),Math.floor(n.max.x-n.min.x),Math.floor(n.max.y-n.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),r.hasBounds&&t.setTransform(1,0,0,1,0,0)},r=function(e,t){var n=e.engine,o=e.timing,i=o.historySize,r=n.timing.timestamp;o.delta=t-o.lastTime||d._goodDelta,o.lastTime=t,o.timestampElapsed=r-o.lastTimestamp||0,o.lastTimestamp=r,o.deltaHistory.unshift(o.delta),o.deltaHistory.length=Math.min(o.deltaHistory.length,i),o.engineDeltaHistory.unshift(n.timing.lastDelta),o.engineDeltaHistory.length=Math.min(o.engineDeltaHistory.length,i),o.timestampElapsedHistory.unshift(o.timestampElapsed),o.timestampElapsedHistory.length=Math.min(o.timestampElapsedHistory.length,i),o.engineUpdatesHistory.unshift(n.timing.lastUpdatesPerFrame),o.engineUpdatesHistory.length=Math.min(o.engineUpdatesHistory.length,i),o.engineElapsedHistory.unshift(n.timing.lastElapsed),o.engineElapsedHistory.length=Math.min(o.engineElapsedHistory.length,i),o.elapsedHistory.unshift(o.lastElapsed),o.elapsedHistory.length=Math.min(o.elapsedHistory.length,i)},a=function(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length||0},s=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.oncontextmenu=function(){return!1},n.onselectstart=function(){return!1},n},l=function(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},u=function(e,t){var n=e.textures[t];return n||((n=e.textures[t]=new Image).src=t),n},c=function(e,t){var n=t;/(jpg|gif|png)$/.test(t)&&(n="url("+t+")"),e.canvas.style.background=n,e.canvas.style.backgroundSize="contain",e.currentBackground=t}},function(e,t,n){var o,i={};e.exports=i;var r=n(5),a=n(17),s=n(0);i._maxFrameDelta=1e3/15,i._frameDeltaFallback=1e3/60,i._timeBufferMargin=1.5,i._elapsedNextEstimate=1,i._smoothingLowerBound=.1,i._smoothingUpperBound=.9,i.create=function(e){var t=s.extend({delta:1e3/60,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:1e3/30,lastUpdatesDeferred:0,enabled:!0},e);return t.fps=0,t},i.run=function(e,t){return e.timeBuffer=i._frameDeltaFallback,!function n(o){e.frameRequestId=i._onNextFrame(e,n),o&&e.enabled&&i.tick(e,t,o)}(),e},i.tick=function(e,t,n){var l=s.now(),u=e.delta,c=0,d=n-e.timeLastTick;if((!d||!e.timeLastTick||d>Math.max(i._maxFrameDelta,e.maxFrameTime))&&(d=e.frameDelta||i._frameDeltaFallback),e.frameDeltaSmoothing){e.frameDeltaHistory.push(d),e.frameDeltaHistory=e.frameDeltaHistory.slice(-e.frameDeltaHistorySize);var p=e.frameDeltaHistory.slice(0).sort();d=o(e.frameDeltaHistory.slice(p.length*i._smoothingLowerBound,p.length*i._smoothingUpperBound))||d}e.frameDeltaSnapping&&(d=1e3/Math.round(1e3/d)),e.frameDelta=d,e.timeLastTick=n,e.timeBuffer+=e.frameDelta,e.timeBuffer=s.clamp(e.timeBuffer,0,e.frameDelta+u*i._timeBufferMargin),e.lastUpdatesDeferred=0;var f=e.maxUpdates||Math.ceil(e.maxFrameTime/u),h={timestamp:t.timing.timestamp};r.trigger(e,"beforeTick",h),r.trigger(e,"tick",h);for(var m=s.now();u>0&&e.timeBuffer>=u*i._timeBufferMargin;){r.trigger(e,"beforeUpdate",h),a.update(t,u),r.trigger(e,"afterUpdate",h),e.timeBuffer-=u,c+=1;var v=s.now()-l,y=s.now()-m,g=v+i._elapsedNextEstimate*y/c;if(c>=f||g>e.maxFrameTime){e.lastUpdatesDeferred=Math.round(Math.max(0,e.timeBuffer/u-i._timeBufferMargin));break}}t.timing.lastUpdatesPerFrame=c,r.trigger(e,"afterTick",h),e.frameDeltaHistory.length>=100&&(e.lastUpdatesDeferred&&Math.round(e.frameDelta/u)>f?s.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):e.lastUpdatesDeferred&&s.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),void 0!==e.isFixed&&s.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(e.deltaMin||e.deltaMax)&&s.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),0!==e.fps&&s.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},i.stop=function(e){i._cancelNextFrame(e)},i._onNextFrame=function(e,t){if("undefined"!=typeof window&&window.requestAnimationFrame)e.frameRequestId=window.requestAnimationFrame(t);else throw Error("Matter.Runner: missing required global window.requestAnimationFrame.");return e.frameRequestId},i._cancelNextFrame=function(e){if("undefined"!=typeof window&&window.cancelAnimationFrame)window.cancelAnimationFrame(e.frameRequestId);else throw Error("Matter.Runner: missing required global window.cancelAnimationFrame.")},o=function(e){for(var t=0,n=e.length,o=0;o<n;o+=1)t+=e[o];return t/n||0}},function(e,t,n){var o={};e.exports=o;var i=n(8),r=n(0).deprecated;o.collides=function(e,t){return i.collides(e,t)},r(o,"collides","SAT.collides ➤ replaced by Collision.collides")},function(e,t,n){var o={};e.exports=o,n(1);var i=n(0);o.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||i.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,r,a,s,l,u,c,d,p,f,h,m=[],v=0,y=0,g=0;t=t||15;var _=function(e,t,n){var o=n%2==1&&n>1;if(!p||e!=p.x||t!=p.y){p&&o?(f=p.x,h=p.y):(f=0,h=0);var i={x:f+e,y:h+t};(o||!p)&&(p=i),m.push(i),y=f+e,g=h+t}},x=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":y=e.x,g=e.y;break;case"H":y=e.x;break;case"V":g=e.y}_(y,g,e.pathSegType)}};for(o._svgPathToAbsolute(e),a=e.getTotalLength(),u=[],n=0;n<e.pathSegList.numberOfItems;n+=1)u.push(e.pathSegList.getItem(n));for(c=u.concat();v<a;){if((l=u[e.getPathSegAtLength(v)])!=d){for(;c.length&&c[0]!=l;)x(c.shift());d=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":_((s=e.getPointAtLength(v)).x,s.y,0)}v+=t}for(n=0,r=c.length;n<r;++n)x(c[n]);return m},o._svgPathToAbsolute=function(e){for(var t,n,o,i,r,a,s=e.pathSegList,l=0,u=0,c=s.numberOfItems,d=0;d<c;++d){var p=s.getItem(d),f=p.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(f))"x"in p&&(l=p.x),"y"in p&&(u=p.y);else switch("x1"in p&&(o=l+p.x1),"x2"in p&&(r=l+p.x2),"y1"in p&&(i=u+p.y1),"y2"in p&&(a=u+p.y2),"x"in p&&(l+=p.x),"y"in p&&(u+=p.y),f){case"m":s.replaceItem(e.createSVGPathSegMovetoAbs(l,u),d);break;case"l":s.replaceItem(e.createSVGPathSegLinetoAbs(l,u),d);break;case"h":s.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(l),d);break;case"v":s.replaceItem(e.createSVGPathSegLinetoVerticalAbs(u),d);break;case"c":s.replaceItem(e.createSVGPathSegCurvetoCubicAbs(l,u,o,i,r,a),d);break;case"s":s.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(l,u,r,a),d);break;case"q":s.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(l,u,o,i),d);break;case"t":s.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(l,u),d);break;case"a":s.replaceItem(e.createSVGPathSegArcAbs(l,u,p.r1,p.r2,p.angle,p.largeArcFlag,p.sweepFlag),d);break;case"z":case"Z":l=t,u=n}("M"==f||"m"==f)&&(t=l,n=u)}}},function(e,t,n){var o={};e.exports=o;var i=n(6);n(0),o.create=i.create,o.add=i.add,o.remove=i.remove,o.clear=i.clear,o.addComposite=i.addComposite,o.addBody=i.addBody,o.addConstraint=i.addConstraint}],n={};function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,(function(t){return e[t]}).bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=20)}()},9385,(e,t,n)=>{!function(){"use strict";var t=function(){this.init()};t.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||d(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),r=0;r<i.length;r++){var a=t._howls[n]._soundById(i[r]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||d(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),r=0;r<i.length;r++){var a=t._howls[n]._soundById(i[r]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||o,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,d()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var t=new Audio;void 0===t.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator?e._navigator.userAgent:"",r=i.match(/OPR\/(\d+)/g),a=r&&33>parseInt(r[0].split("/")[1],10),s=-1!==i.indexOf("Safari")&&-1===i.indexOf("Chrome"),l=i.match(/Version\/(.*?) /),u=s&&l&&15>parseInt(l[1],10);return e._codecs={mp3:!!(!a&&(n||t.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!u&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!u&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var o=new Audio;o._unlocked=!0,e._releaseHtml5Audio(o)}catch(t){e.noAudio=!0;break}for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var r=e._howls[i]._getSoundIds(),a=0;a<r.length;a++){var s=e._howls[i]._soundById(r[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=new Audio().play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||o;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio){for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new t,i=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(e){var t=this;return o.ctx||d(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!!e.xhr&&!!e.xhr.withCredentials&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e,t,n=null;if(o.noAudio)return void this._emit("loaderror",null,"No audio support.");"string"==typeof this._src&&(this._src=[this._src]);for(var i=0;i<this._src.length;i++){if(this._format&&this._format[i])e=this._format[i];else{if("string"!=typeof(t=this._src[i])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(e=/^data:audio\/([^;,]+);/i.exec(t))||(e=/\.([^.]+)$/.exec(t.split("?",1)[0])),e&&(e=e[1].toLowerCase())}if(e||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),e&&o.codecs(e)){n=this._src[i];break}}return n?(this._src=n,this._state="loading","https:"===window.location.protocol&&"http:"===n.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new r(this),this._webAudio&&s(this),this):void this._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,t){var n=this,i=null;if("number"==typeof e)i=e,e=null;else if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;else if(void 0===e&&(e="__default",!n._playLock)){for(var r=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(r++,i=n._sounds[a]._id);1===r?e=null:i=null}var s=i?n._soundById(i):n._inactiveSound();if(!s)return null;if(i&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var l=s._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(i&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var u=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),d=1e3*c/Math.abs(s._rate),p=n._sprite[e][0]/1e3,f=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var h=function(){s._paused=!1,s._seek=u,s._start=p,s._stop=f,s._loop=!!(s._loop||n._sprite[e][2])};if(u>=f)return void n._ended(s);var m=s._node;if(n._webAudio){var v=function(){n._playLock=!1,h(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;m.gain.setValueAtTime(e,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===m.bufferSource.start?s._loop?m.bufferSource.noteGrainOn(0,u,86400):m.bufferSource.noteGrainOn(0,u,c):s._loop?m.bufferSource.start(0,u,86400):m.bufferSource.start(0,u,c),d!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d)),t||setTimeout(function(){n._emit("play",s._id),n._loadQueue()},0)};"running"===o.state&&"interrupted"!==o.ctx.state?v():(n._playLock=!0,n.once("resume",v),n._clearTimer(s._id))}else{var y=function(){m.currentTime=u,m.muted=s._muted||n._muted||o._muted||m.muted,m.volume=s._volume*o.volume(),m.playbackRate=s._rate;try{var i=m.play();if(i&&"undefined"!=typeof Promise&&(i instanceof Promise||"function"==typeof i.then)?(n._playLock=!0,h(),i.then(function(){n._playLock=!1,m._unlocked=!0,t?n._loadQueue():n._emit("play",s._id)}).catch(function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0})):t||(n._playLock=!1,h(),n._emit("play",s._id)),m.playbackRate=s._rate,m.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d):(n._endTimers[s._id]=function(){n._ended(s),m.removeEventListener("ended",n._endTimers[s._id],!1)},m.addEventListener("ended",n._endTimers[s._id],!1))}catch(e){n._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var g=window&&window.ejecta||!m.readyState&&o._navigator.isCocoonJS;if(m.readyState>=3||g)y();else{n._playLock=!0,n._state="loading";var _=function(){n._state="loaded",y(),m.removeEventListener(o._canPlayEvent,_,!1)};m.addEventListener(o._canPlayEvent,_,!1),n._clearTimer(s._id)}}return s._id},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o]);var i=t._soundById(n[o]);if(i&&!i._paused&&(i._seek=t.seek(n[o]),i._rateSeek=0,i._paused=!0,t._stopFade(n[o]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var o=n._getSoundIds(e),i=0;i<o.length;i++){n._clearTimer(o[i]);var r=n._soundById(o[i]);r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,n._stopFade(o[i]),r._node&&(n._webAudio?r._node.bufferSource&&(void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),n._cleanBuffer(r._node)):isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause(),r._node.duration===1/0&&n._clearSound(r._node))),t||n._emit("stop",r._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t)if("boolean"!=typeof e)return n._muted;else n._muted=e;for(var i=n._getSoundIds(t),r=0;r<i.length;r++){var a=n._soundById(i[r]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||e),n._emit("mute",a._id))}return n},volume:function(){var e,t,n,i=this,r=arguments;if(0===r.length)return i._volume;if(1===r.length||2===r.length&&void 0===r[1]?i._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):e=parseFloat(r[0]):r.length>=2&&(e=parseFloat(r[0]),t=parseInt(r[1],10)),void 0===e||!(e>=0)||!(e<=1))return(n=t?i._soundById(t):i._sounds[0])?n._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,r)}}),i;void 0===t&&(i._volume=e),t=i._getSoundIds(t);for(var a=0;a<t.length;a++)(n=i._soundById(t[a]))&&(n._volume=e,r[2]||i._stopFade(t[a]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),i._emit("volume",n._id));return i},fade:function(e,t,n,i){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(e,t,n,i)}}),r;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),r.volume(e,i);for(var a=r._getSoundIds(i),s=0;s<a.length;s++){var l=r._soundById(a[s]);if(l){if(i||r._stopFade(a[s]),r._webAudio&&!l._muted){var u=o.ctx.currentTime,c=u+n/1e3;l._volume=e,l._node.gain.setValueAtTime(e,u),l._node.gain.linearRampToValueAtTime(t,c)}r._startFadeInterval(l,e,t,n,a[s],void 0===i)}}return r},_startFadeInterval:function(e,t,n,o,i,r){var a=this,s=t,l=n-t,u=Math.abs(l/.01),c=Math.max(4,u>0?o/u:o),d=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var i=(Date.now()-d)/o;d=Date.now(),s+=l*i,s=Math.round(100*s)/100,s=l<0?Math.max(n,s):Math.min(n,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),r&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))},c)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,o=arguments;if(0===o.length)return this._loop;if(1===o.length)if("boolean"!=typeof o[0])return!!(n=this._soundById(parseInt(o[0],10)))&&n._loop;else e=o[0],this._loop=e;else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var i=this._getSoundIds(t),r=0;r<i.length;r++)(n=this._soundById(i[r]))&&(n._loop=e,this._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,this.playing(i[r])&&(this.pause(i[r],!0),this.play(i[r],!0)))));return this},rate:function(){var e,t,n,i=this,r=arguments;if(0===r.length?t=i._sounds[0]._id:1===r.length?i._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):e=parseFloat(r[0]):2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10)),"number"!=typeof e)return(n=i._soundById(t))?n._rate:i._rate;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,r)}}),i;void 0===t&&(i._rate=e),t=i._getSoundIds(t);for(var a=0;a<t.length;a++)if(n=i._soundById(t[a])){i.playing(t[a])&&(n._rateSeek=i.seek(t[a]),n._playStart=i._webAudio?o.ctx.currentTime:n._playStart),n._rate=e,i._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):n._node&&(n._node.playbackRate=e);var s=i.seek(t[a]),l=1e3*((i._sprite[n._sprite][0]+i._sprite[n._sprite][1])/1e3-s)/Math.abs(n._rate);(i._endTimers[t[a]]||!n._paused)&&(i._clearTimer(t[a]),i._endTimers[t[a]]=setTimeout(i._ended.bind(i,n),l)),i._emit("rate",n._id)}return i},seek:function(){var e,t,n=this,i=arguments;if(0===i.length?n._sounds.length&&(t=n._sounds[0]._id):1===i.length?n._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(i[0])):2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10)),void 0===t)return 0;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var r=n._soundById(t);if(r)if("number"==typeof e&&e>=0){var a=n.playing(t);a&&n.pause(t,!0),r._seek=e,r._ended=!1,n._clearTimer(t),n._webAudio||!r._node||isNaN(r._node.duration)||(r._node.currentTime=e);var s=function(){a&&n.play(t,!0),n._emit("seek",t)};if(a&&!n._webAudio){var l=function(){n._playLock?setTimeout(l,0):s()};setTimeout(l,0)}else s()}else{if(!n._webAudio)return r._node.currentTime;var u=n.playing(t)?o.ctx.currentTime-r._playStart:0,c=r._rateSeek?r._rateSeek-r._seek:0;return r._seek+(c+u*Math.abs(r._rate))}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),o._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var i=o._howls.indexOf(e);i>=0&&o._howls.splice(i,1);var r=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===e._src||e._src.indexOf(o._howls[n]._src)>=0){r=!1;break}return a&&r&&delete a[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,o){var i=this["_on"+e];return"function"==typeof t&&i.push(o?{id:n,fn:t,once:o}:{id:n,fn:t}),this},off:function(e,t,n){var o=this["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<o.length;i++){var r=n===o[i].id;if(t===o[i].fn&&r||!t&&r){o.splice(i,1);break}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(this[a[i]])&&(this[a[i]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var o=this["_on"+e],i=o.length-1;i>=0;i--)(!o[i].id||o[i].id===t||"load"===e)&&(setTimeout((function(e){e.call(this,t,n)}).bind(this,o[i].fn),0),o[i].once&&this.off(e,o[i].fn,o[i].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!!(e._loop||this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var i=(e._stop-e._start)*1e3/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),i)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),o._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new r(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0!==e)return[e];for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=a[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){var t=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return this;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=o._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(e){this._parent=e,this.init()};r.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=o._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(t,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):o.noAudio||(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=e._src,this._node.preload=!0===e._preload?"auto":e._preload,this._node.volume=t*o.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)},_endListener:function(){var e=this._parent;e._duration===1/0&&(e._duration=Math.ceil(10*this._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var a={},s=function(e){var t=e._src;if(a[t]){e._duration=a[t].duration,c(e);return}if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),i=0;i<n.length;++i)o[i]=n.charCodeAt(i);u(o.buffer,e)}else{var r=new XMLHttpRequest;r.open(e._xhr.method,t,!0),r.withCredentials=e._xhr.withCredentials,r.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){r.setRequestHeader(t,e._xhr.headers[t])}),r.onload=function(){var t=(r.status+"")[0];"0"!==t&&"2"!==t&&"3"!==t?e._emit("loaderror",null,"Failed loading audio file with status: "+r.status+"."):u(r.response,e)},r.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete a[t],e.load())},l(r)}},l=function(e){try{e.send()}catch(t){e.onerror()}},u=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},i=function(e){e&&t._sounds.length>0?(a[t._src]=e,c(t,e)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(i).catch(n):o.ctx.decodeAudioData(e,i,n)},c=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},d=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(e){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var i=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!i&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};"function"==typeof define&&define.amd&&e.v({Howler:o,Howl:i}),n.Howler=o,n.Howl=i,e.g.HowlerGlobal=t,e.g.Howler=o,e.g.Howl=i,e.g.Sound=r}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e)?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this):this},HowlerGlobal.prototype.orientation=function(e,t,n,o,i,r){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return(t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,o="number"!=typeof o?a[3]:o,i="number"!=typeof i?a[4]:i,r="number"!=typeof r?a[5]:r,"number"!=typeof e)?a:(this._orientation=[e,t,n,o,i,r],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(r,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,o,i,r),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,t){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,t)}}),n;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t)if("number"!=typeof e)return n._stereo;else n._stereo=e,n._pos=[e,0,0];for(var r=n._getSoundIds(t),a=0;a<r.length;a++){var s=n._soundById(r[a]);if(s)if("number"!=typeof e)return s._stereo;else s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||o(s,i),"spatial"===i?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),n._emit("stereo",s._id)}return n},Howl.prototype.pos=function(e,t,n,i){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(e,t,n,i)}}),r;if(t="number"!=typeof t?0:t,n="number"!=typeof n?-.5:n,void 0===i)if("number"!=typeof e)return r._pos;else r._pos=[e,t,n];for(var a=r._getSoundIds(i),s=0;s<a.length;s++){var l=r._soundById(a[s]);if(l)if("number"!=typeof e)return l._pos;else l._pos=[e,t,n],l._node&&((!l._panner||l._panner.pan)&&o(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setPosition(e,t,n)),r._emit("pos",l._id)}return r},Howl.prototype.orientation=function(e,t,n,i){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(e,t,n,i)}}),r;if(t="number"!=typeof t?r._orientation[1]:t,n="number"!=typeof n?r._orientation[2]:n,void 0===i)if("number"!=typeof e)return r._orientation;else r._orientation=[e,t,n];for(var a=r._getSoundIds(i),s=0;s<a.length;s++){var l=r._soundById(a[s]);if(l)if("number"!=typeof e)return l._orientation;else l._orientation=[e,t,n],l._node&&(l._panner||(l._pos||(l._pos=r._pos||[0,0,-.5]),o(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setOrientation(e,t,n)),r._emit("orientation",l._id)}return r},Howl.prototype.pannerAttr=function(){var e,t,n,i=arguments;if(!this._webAudio)return this;if(0===i.length)return this._pannerAttr;if(1===i.length)if("object"!=typeof i[0])return(n=this._soundById(parseInt(i[0],10)))?n._pannerAttr:this._pannerAttr;else e=i[0],void 0===t&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:this._panningModel});else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var r=this._getSoundIds(t),a=0;a<r.length;a++)if(n=this._soundById(r[a])){var s=n._pannerAttr;s={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:s.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:s.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:s.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:s.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:s.panningModel};var l=n._panner;l||(n._pos||(n._pos=this._pos||[0,0,-.5]),o(n,"spatial"),l=n._panner),l.coneInnerAngle=s.coneInnerAngle,l.coneOuterAngle=s.coneOuterAngle,l.coneOuterGain=s.coneOuterGain,l.distanceModel=s.distanceModel,l.maxDistance=s.maxDistance,l.refDistance=s.refDistance,l.rolloffFactor=s.rolloffFactor,l.panningModel=s.panningModel}return this},Sound.prototype.init=(t=Sound.prototype.init,function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}),Sound.prototype.reset=(n=Sound.prototype.reset,function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),n.call(this)});var e,t,n,o=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()},4751,e=>{"use strict";var t=e.i(43476),n=e.i(71645),o=e.i(48013);class i{engine;world;softBody=null;walls=[];constructor(){this.engine=o.Engine.create(),this.world=this.engine.world,this.world.gravity.y=0}createSoftDonut(e,t,n=80,i=16){let r=o.Bodies.circle(e,t,12,{restitution:.9,frictionAir:.02}),a=Array.from({length:i},(r,a)=>{let s=2*Math.PI/i*a,l=e+Math.cos(s)*n,u=t+Math.sin(s)*n;return o.Bodies.circle(l,u,12,{restitution:.7,frictionAir:.02})}),s=[];a.forEach((e,t)=>{let n=a[(t+1)%i];s.push(o.Constraint.create({bodyA:e,bodyB:n,stiffness:.6,length:24}))}),a.forEach(e=>{s.push(o.Constraint.create({bodyA:e,bodyB:r,stiffness:.85,length:n}))}),o.World.add(this.world,[r,...a,...s]),this.softBody={center:r,outer:a,constraints:s}}setBounds(e,t){this.walls.forEach(e=>o.World.remove(this.world,e));let n=o.Bodies.rectangle(e/2,-50,e+100,100,{isStatic:!0,restitution:.2,friction:.1}),i=o.Bodies.rectangle(e/2,t+50,e+100,100,{isStatic:!0,restitution:.2,friction:.1}),r=o.Bodies.rectangle(-50,t/2,100,t+100,{isStatic:!0,restitution:.2,friction:.1}),a=o.Bodies.rectangle(e+50,t/2,100,t+100,{isStatic:!0,restitution:.2,friction:.1});this.walls=[n,i,r,a],o.World.add(this.world,this.walls)}update(e){o.Engine.update(this.engine,e)}}class r{canvas;ctx;dpr;constructor(e){this.canvas=e;const t=e.getContext("2d");if(!t)throw Error("2D context not available");this.ctx=t,this.dpr=Math.max(1,window.devicePixelRatio||1)}resize(e,t){this.canvas.width=Math.floor(e*this.dpr),this.canvas.height=Math.floor(t*this.dpr),this.canvas.style.width=`${e}px`,this.canvas.style.height=`${t}px`,this.ctx.setTransform(this.dpr,0,0,this.dpr,0,0)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}drawSoftBody(e,t){let n=this.ctx;this.clear();let{width:o,height:i}=this.canvas.getBoundingClientRect(),r=n.createLinearGradient(0,0,0,i);r.addColorStop(0,"#f9fafb"),r.addColorStop(1,"#eef2ff"),n.fillStyle=r,n.fillRect(0,0,o,i);let a=t.map(e=>({x:e.position.x,y:e.position.y}));if(a.length<3)return;n.beginPath();for(let e=0;e<a.length;e++){let t=a[e],o=a[(e+1)%a.length],i=(t.x+o.x)/2,r=(t.y+o.y)/2;0===e&&n.moveTo(i,r),n.quadraticCurveTo(t.x,t.y,i,r)}n.closePath();let s=n.createRadialGradient(e.position.x,e.position.y,10,e.position.x,e.position.y,Math.max(60,Math.hypot(a[0].x-e.position.x,a[0].y-e.position.y)));s.addColorStop(0,"rgba(255, 192, 203, 0.9)"),s.addColorStop(1,"rgba(255, 105, 180, 0.75)"),n.fillStyle=s,n.fill(),n.save(),n.globalAlpha=.35,n.beginPath(),n.arc(e.position.x-20,e.position.y-20,30,0,2*Math.PI),n.fillStyle="white",n.fill(),n.restore()}}var a=e.i(47167),s=e.i(9385);class l{canvas;bodies;pointers;pressSound;releaseSound;constructor(e,t){this.canvas=e,this.bodies=t,this.pointers=new Map,this.onPointerDown=e=>{let t=this.canvas.getBoundingClientRect(),n=e.clientX-t.left,o=e.clientY-t.top,i=this.pickNearest(n,o,60),r={id:e.pointerId,lastX:n,lastY:o,target:i};this.pointers.set(e.pointerId,r),this.canvas.setPointerCapture?.(e.pointerId),i&&this.pressSound&&this.pressSound.play(),navigator.vibrate&&navigator.vibrate(10)},this.onPointerMove=e=>{let t=this.pointers.get(e.pointerId);if(!t)return;let n=this.canvas.getBoundingClientRect(),i=e.clientX-n.left,r=e.clientY-n.top,a=i-t.lastX,s=r-t.lastY;t.lastX=i,t.lastY=r,t.target&&o.Body.applyForce(t.target,t.target.position,{x:.002*a,y:.002*s})},this.onPointerUp=e=>{let t=this.pointers.get(e.pointerId);t&&(t.target&&this.releaseSound&&this.releaseSound.play(),navigator.vibrate&&navigator.vibrate(8),this.pointers.delete(e.pointerId))};try{const e=(a.default.env.NEXT_PUBLIC_BASE_PATH||"").replace(/\/+$/,""),t=e?`/${e}`:"";this.pressSound=new s.Howl({src:[`${t}/sounds/press.mp3`],volume:.6}),this.releaseSound=new s.Howl({src:[`${t}/sounds/release.mp3`],volume:.6})}catch(e){}}attach(){this.canvas.addEventListener("pointerdown",this.onPointerDown),this.canvas.addEventListener("pointermove",this.onPointerMove,{passive:!0}),this.canvas.addEventListener("pointerup",this.onPointerUp),this.canvas.addEventListener("pointercancel",this.onPointerUp)}detach(){this.canvas.removeEventListener("pointerdown",this.onPointerDown),this.canvas.removeEventListener("pointermove",this.onPointerMove),this.canvas.removeEventListener("pointerup",this.onPointerUp),this.canvas.removeEventListener("pointercancel",this.onPointerUp),this.pointers.clear()}pickNearest(e,t,n=40){let o,i=1/0;for(let r of this.bodies){let a=Math.hypot(r.position.x-e,r.position.y-t);a<i&&a<=n&&(i=a,o=r)}return o}onPointerDown;onPointerMove;onPointerUp}class u{canvas;physics;renderer;input;rafId;lastTs;constructor(e){this.canvas=e,this.rafId=0,this.lastTs=0,this.loop=e=>{let t=Math.min(32,e-this.lastTs||16);this.lastTs=e,this.physics.update(t);let n=this.physics.softBody;n&&this.renderer.drawSoftBody(n.center,n.outer),this.rafId=requestAnimationFrame(this.loop)},this.physics=new i,this.renderer=new r(e)}start(){let e=this.canvas.getBoundingClientRect();this.renderer.resize(e.width,e.height),this.physics.setBounds(e.width,e.height),this.physics.createSoftDonut(e.width/2,e.height/2,Math.min(e.width,e.height)/4,18);let t=this.physics.softBody?this.physics.softBody.outer:[];this.input=new l(this.canvas,t),this.input.attach(),this.lastTs=performance.now(),this.loop(this.lastTs)}stop(){cancelAnimationFrame(this.rafId),this.input&&this.input.detach()}resize(){let e=this.canvas.getBoundingClientRect();this.renderer.resize(e.width,e.height),this.physics.setBounds(e.width,e.height)}loop}function c(){let e=(0,n.useRef)(null),o=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let t=e.current;if(!t)return;let n=new u(t);o.current=n,n.start();let i=()=>n.resize();return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i),n.stop(),o.current=null}},[]),(0,t.jsxs)("div",{className:"relative w-full h-[calc(100vh-0px)]",children:[(0,t.jsx)("canvas",{ref:e,className:"w-full h-full touch-none"}),(0,t.jsx)("div",{className:"pointer-events-none absolute left-4 top-4 rounded-full bg-white/70 px-3 py-1 text-sm text-zinc-700 shadow",children:"揉团子 · 试试拖拽/揉捏"})]})}e.s(["default",()=>c],4751)}]);